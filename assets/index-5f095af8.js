(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(r){if(r.ep)return;r.ep=!0;const t=n(r);fetch(r.href,t)}})();function B(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function $(e){const o=e.toLowerCase();return o.includes("twitter.com")||o.includes("x.com")?"Twitter":o.includes("youtube.com")||o.includes("youtu.be")?"YouTube":o.includes("instagram.com")?"Instagram":o.includes("linkedin.com")?"LinkedIn":o.includes("pinterest.com")?"Pinterest":"Website"}function E(e){return e?e.split(",").map(o=>o.trim()).filter(o=>o.length>0):[]}function v(e){const o=document.getElementById("tagFilter");if(!o)return;const n=o.value;for(;o.options.length>1;)o.remove(1);if(e&&e.length>0){const s=[...e].sort();s.forEach(r=>{if(r&&r.trim()){const t=document.createElement("option");t.value=r,t.textContent=r,o.appendChild(t)}}),s.includes(n)&&(o.value=n)}}function H(e,o){const n=document.createElement("div");n.className="bg-gray-100 animate-pulse p-4 h-64 flex items-center justify-center",n.innerHTML='<p class="text-gray-500">Loading Instagram post...</p>',o.appendChild(n);const s=U(e);if(!s){O(o,"Invalid Instagram URL",e);return}const r=document.createElement("div");r.className="instagram-embed-container",r.innerHTML=`
    <blockquote 
      class="instagram-media" 
      data-instgrm-captioned 
      data-instgrm-permalink="https://www.instagram.com/p/${s}/" 
      data-instgrm-version="14">
      <a href="https://www.instagram.com/p/${s}/">View this post on Instagram</a>
    </blockquote>
  `,o.appendChild(r),j(),setTimeout(()=>{n&&n.parentNode&&n.remove()},5e3)}function U(e){const o=/instagram\.com\/(?:p|reel)\/([A-Za-z0-9_-]+)/i,n=e.match(o);return n?n[1]:""}function O(e,o,n=null){e.innerHTML="";const s=document.createElement("div");if(s.className="p-4 bg-red-50 text-red-700 text-center",n){const r=document.createElement("a");r.href=n,r.target="_blank",r.rel="noopener noreferrer",r.className="underline hover:text-red-800",r.textContent=o+" - Open original",s.appendChild(r)}else s.textContent=o;e.appendChild(s)}function j(){if(window.instgrm){window.instgrm.Embeds&&window.instgrm.Embeds.process&&window.instgrm.Embeds.process();return}if(!document.querySelector('script[src*="//www.instagram.com/embed.js"]')){const e=document.createElement("script");e.src="//www.instagram.com/embed.js",e.async=!0,e.defer=!0,document.body.appendChild(e),e.onload=()=>{window.instgrm&&window.instgrm.Embeds&&window.instgrm.Embeds.process&&window.instgrm.Embeds.process()}}}const q="https://link-preview-worker.dunyayavas.workers.dev";async function A(e){try{if(e.includes("linkedin.com")||e.includes("pinterest.com")){const o=`${q}?url=${encodeURIComponent(e)}`,n=await fetch(o);if(!n.ok)throw new Error(`Failed to fetch metadata: ${n.status}`);const s=await n.json();return!s.title||s.error?(console.warn("Falling back to generated metadata due to worker error:",s.error||"Missing title"),T(e)):(delete s.caption,s.realCaption=null,s)}else return{title:"Web Page",description:"No metadata available for this URL",image:null,url:e,siteName:new URL(e).hostname}}catch(o){return console.error("Error fetching metadata:",o),e.includes("linkedin.com")?T(e):e.includes("pinterest.com")?{title:"Pinterest",description:"View this content on Pinterest",image:"https://s.pinimg.com/webapp/favicon-56d11a4a.png",url:e,siteName:"Pinterest",realCaption:null}:{title:"Web Page",description:"Error fetching metadata",image:null,url:e,siteName:new URL(e).hostname}}}function T(e){const o=e.toLowerCase(),n={url:e,siteName:"LinkedIn"};let s="unknown";if(o.includes("/posts/")?s="post":o.includes("/pulse/")?s="article":o.includes("/in/")?s="profile":o.includes("/company/")&&(s="company"),n.image="https://cdn-icons-png.flaticon.com/512/174/174857.png",n.caption=R(s),n.realCaption=null,s==="profile"){const r=/linkedin\.com\/in\/([^\/\?#]+)/i,t=e.match(r);if(t&&t[1]){const i=t[1].replace(/-/g," ");n.title=`${i} | LinkedIn`,n.description=`View ${i}'s profile on LinkedIn, the world's largest professional community.`,n.image="https://cdn-icons-png.flaticon.com/512/3135/3135715.png"}}else if(s==="company"){const r=/linkedin\.com\/company\/([^\/\?#]+)/i,t=e.match(r);if(t&&t[1]){const i=t[1].replace(/-/g," ");n.title=`${i} | LinkedIn`,n.description=`Learn about ${i}, including available jobs, company insights, and more.`,n.image="https://cdn-icons-png.flaticon.com/512/2910/2910791.png"}}else if(s==="post"){const r=/linkedin\.com\/posts\/([^\/\?#]+)/i,t=e.match(r);if(t&&t[1]){const i=t[1].replace(/-/g," ");n.title=`LinkedIn Post by ${i}`,n.description=`Check out this post on LinkedIn by ${i}.`,n.image="https://cdn-icons-png.flaticon.com/512/5968/5968884.png"}}else if(s==="article"){const r=/linkedin\.com\/pulse\/([^\/\?#]+)(?:-([^\/\?#]+))?/i,t=e.match(r);if(t){const i=t[1]?t[1].replace(/-/g," "):"Article",d=t[2]?t[2].replace(/-/g," "):"";n.title=i.charAt(0).toUpperCase()+i.slice(1),n.description=d?`Article by ${d} on LinkedIn`:"Read this article on LinkedIn",n.image="https://cdn-icons-png.flaticon.com/512/2258/2258853.png"}}else n.title="LinkedIn",n.description="View this content on LinkedIn, the world's largest professional network.";return n}function R(e){const o={profile:"I am excited to share that I have joined a new company as a Senior Developer. Looking forward to this new journey! #NewBeginnings #CareerGrowth",company:"We are thrilled to announce our latest product launch! After months of hard work, our team has created something truly innovative. Check out the link to learn more. #ProductLaunch #Innovation",post:"Just finished an amazing project with my team. It is incredible what we can achieve when we collaborate effectively. #Teamwork #ProjectSuccess",article:"In my latest article, I discuss the future of remote work and how companies can adapt to this new normal. Read more to discover key strategies for success. #RemoteWork #FutureOfWork",unknown:"Sharing some thoughts on LinkedIn about professional development and career growth. What strategies have worked for you? #ProfessionalDevelopment"};return o[e]||o.unknown}function z(e,o){const n=document.createElement("div");n.className="bg-gray-100 animate-pulse p-4 h-64 flex items-center justify-center",n.innerHTML='<p class="text-gray-500">Loading Pinterest content...</p>',o.appendChild(n);const s=e.includes("/pin/"),r=e.includes("/board/")||/pinterest\.com\/([^\/]+)\/([^\/]+)\/?$/.test(e)&&!e.includes("/pin/");if(!s&&!r){C(o,"Invalid Pinterest URL",e);return}let t="",i={username:"",boardName:""};if(s){if(t=F(e),!t){C(o,"Invalid Pinterest pin URL",e);return}}else if(r&&(i=W(e),!i.username||!i.boardName)){C(o,"Invalid Pinterest board URL",e);return}o.querySelectorAll(".pinterest-official-embed, .pinterest-fallback-container").forEach(l=>l.remove());const a=document.createElement("div");if(a.className="pinterest-official-embed",a.style.display="block",s){const l=document.createElement("a");l.href=e,l.setAttribute("data-pin-do","embedPin"),l.setAttribute("data-pin-width","medium"),a.appendChild(l)}else if(r){const l=document.createElement("a");l.href=e,l.setAttribute("data-pin-do","embedBoard"),l.setAttribute("data-pin-board-width","100%"),l.setAttribute("data-pin-scale-height","400"),l.setAttribute("data-pin-scale-width","60"),l.setAttribute("data-pin-columns","1"),a.appendChild(l)}o.appendChild(a);const m=document.createElement("div");m.className="pinterest-fallback-container",m.style.display="none",o.appendChild(m),V(),setTimeout(()=>{a.querySelector("iframe, span[data-pin-href]")?(m.style.display="none",a.style.display="block"):(console.log("Pinterest official embed failed to load, using fallback"),a.style.display="none",m.style.display="block",A(e).then(c=>{_(e,m,c,s)}).catch(c=>{console.error("Error fetching Pinterest metadata:",c),D(e,m,s,t,i)}))},3e3),n&&n.parentNode&&n.remove()}function D(e,o,n,s,r){const t=document.createElement("div");t.className="pinterest-preview-card bg-white border border-gray-200 rounded-lg overflow-hidden";const i=document.createElement("div");i.className="flex items-center p-3 bg-red-50 border-b border-gray-200",i.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-6 h-6 mr-2 text-red-600">
      <path fill="currentColor" d="M12 0a12 12 0 0 0-4.37 23.17c-.1-.94-.2-2.4.04-3.44.2-.84 1.3-5.34 1.3-5.34s-.33-.67-.33-1.66c0-1.56.9-2.73 2.02-2.73.96 0 1.42.72 1.42 1.58 0 .96-.61 2.4-.93 3.74-.26 1.1.56 2.01 1.65 2.01 1.97 0 3.5-2.08 3.5-5.09 0-2.66-1.9-4.52-4.62-4.52-3.16 0-5.01 2.36-5.01 4.8 0 .95.37 1.96.82 2.52.1.11.1.2.08.31-.1.37-.3 1.16-.34 1.32-.05.21-.18.26-.4.16-1.5-.7-2.42-2.89-2.42-4.65 0-3.77 2.74-7.25 7.9-7.25 4.14 0 7.36 2.95 7.36 6.9 0 4.11-2.59 7.43-6.18 7.43-1.21 0-2.35-.63-2.74-1.37l-.74 2.84c-.27 1.04-1 2.35-1.49 3.14A12 12 0 1 0 12 0z"/>
    </svg>
    <span class="font-semibold text-gray-800">${n?"Pinterest Pin":"Pinterest Board"}</span>
  `;const d=document.createElement("div");d.className="w-full aspect-square bg-gray-100 flex items-center justify-center",d.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
    </svg>
  `;const a=document.createElement("div");a.className="p-4";const m=document.createElement("p");if(m.className="text-sm text-gray-600 mb-4",n)if(m.textContent="View this Pinterest pin to discover creative ideas and inspiration.",s){const p=document.createElement("p");p.className="text-xs text-gray-500 mt-2",p.textContent=`Pin ID: ${s}`,a.appendChild(m),a.appendChild(p)}else a.appendChild(m);else if(m.textContent="Explore this Pinterest board to discover a collection of related pins and ideas.",a.appendChild(m),r.username&&r.boardName){const p=document.createElement("p");p.className="text-xs text-gray-500 mt-2",p.textContent=`Board by ${r.username}: ${r.boardName.replace(/-/g," ")}`,a.appendChild(p)}const l=document.createElement("div");l.className="mt-2 text-xs text-gray-500 truncate",l.textContent=e,a.appendChild(l);const c=document.createElement("a");c.href=e,c.target="_blank",c.rel="noopener noreferrer",c.className="block w-full py-2 px-4 bg-red-600 hover:bg-red-700 text-white text-center rounded-b-lg transition-colors mt-4",c.textContent=n?"View Pin on Pinterest":"View Board on Pinterest",a.appendChild(c),t.appendChild(i),t.appendChild(d),t.appendChild(a),o.appendChild(t)}function F(e){const o=/pinterest\.com\/pin\/([0-9]+)/i,n=e.match(o);return n?n[1]:""}function W(e){let o="",n="";const s=/pinterest\.com\/([^\/]+)\/board\/([^\/]+)/i,r=e.match(s);if(r)o=r[1],n=r[2];else{const t=/pinterest\.com\/([^\/]+)\/([^\/]+)\/?$/i,i=e.match(t);i&&!e.includes("/pin/")&&(o=i[1],n=i[2])}return{username:o,boardName:n}}function V(){if(window.PinUtils&&window.PinUtils.build){console.log("Pinterest widgets already loaded"),window.PinUtils.build(),setTimeout(k,500);return}if(document.getElementById("pinterest-widget-script")){console.log("Pinterest script is loading...");return}console.log("Loading Pinterest widget script");const e=document.createElement("script");e.id="pinterest-widget-script",e.async=!0,e.defer=!0,e.src="https://assets.pinterest.com/js/pinit.js",e.onload=function(){if(console.log("Pinterest widget script loaded"),window.PinUtils&&window.PinUtils.build){console.log("Building Pinterest widgets"),window.PinUtils.build(),setTimeout(k,500);let o=0;const n=setInterval(()=>{if(o>=10){clearInterval(n);return}window.PinUtils&&window.PinUtils.build&&(console.log("Rebuilding Pinterest widgets (delayed)"),window.PinUtils.build(),k()),o++},500)}},document.body.appendChild(e)}function k(){console.log("Adjusting Pinterest embeds to fix width issues"),document.querySelectorAll(".pinterest-official-embed").forEach(o=>{o.style.textAlign="center",o.querySelectorAll("iframe").forEach(t=>{t.width<300&&(t.style.minWidth="300px")}),o.querySelectorAll('[data-pin-do="embedPin"]').forEach(t=>{t.style.margin="0 auto",t.style.display="block"}),o.querySelectorAll(".pinterest-board-widget").forEach(t=>{t.style.maxWidth="100%",t.style.width="100%"})}),setTimeout(()=>{console.log("Fixing Pinterest embeds: removing fixed width and duplicate boards"),document.querySelectorAll('#postsGrid span[style*="width: 120px"]').forEach(t=>{console.log("Found Pinterest pin span with fixed width"),t.querySelector("img")?(console.log("This span contains an image, preserving some styling"),t.style.minWidth="236px",t.style.maxWidth="100%",t.style.margin="0 auto",t.style.display="block"):(console.log("Removing width constraint for non-image element"),t.style.width="auto",t.style.maxWidth="100%")}),document.querySelectorAll('.pinterest-official-embed span[style*="width:"]').forEach(t=>{var i;(t.closest('[data-pin-do="embedPin"]')||(i=t.getAttribute("data-pin-href"))!=null&&i.includes("/pin/"))&&(console.log("Found Pinterest pin span with width style, carefully adjusting to be responsive"),t.querySelector("img")?(console.log("This span contains an image, preserving some styling"),t.style.minWidth="236px",t.style.maxWidth="100%",t.style.margin="0 auto",t.style.display="block"):(t.style.width="auto",t.style.maxWidth="100%",t.style.margin="0 auto",t.style.display="block"))}),document.querySelectorAll(".pinterest-official-embed img").forEach(t=>{t.style.display="block",t.style.maxWidth="100%",t.style.margin="0 auto";let i=t.parentElement;for(;i&&i.classList.contains("pinterest-official-embed")===!1;)i.style.display==="none"&&(i.style.display="block"),(i.style.width==="0px"||i.style.height==="0px")&&(i.style.width="auto",i.style.height="auto"),i=i.parentElement}),document.querySelectorAll(".post-card").forEach(t=>{const i=t.querySelectorAll(".pinterest-board-widget");if(i.length>1){console.log(`Found ${i.length} board embeds in one card, keeping only the first one`);for(let a=1;a<i.length;a++)i[a].remove()}const d=t.querySelectorAll('iframe[src*="pinterest.com"]');if(d.length>1){console.log(`Found ${d.length} Pinterest iframes in one card, keeping only the first one`);for(let a=1;a<d.length;a++)d[a].remove()}})},1e3)}function _(e,o,n,s){const r=document.createElement("div");r.className="pinterest-preview-card bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm";let t="";n.image&&(t+=`
      <div class="pinterest-preview-image-container w-full aspect-square bg-gray-100 overflow-hidden">
        <img src="${n.image}" alt="${n.title||"Pinterest"}" class="w-full h-full object-cover">
      </div>
    `),t+=`
    <div class="flex items-center p-3 ${n.image?"border-t border-gray-200":"bg-red-50 border-b border-gray-200"}">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-red-600 flex-shrink-0">
        <path fill="currentColor" d="M12 0a12 12 0 0 0-4.37 23.17c-.1-.94-.2-2.4.04-3.44.2-.84 1.3-5.34 1.3-5.34s-.33-.67-.33-1.66c0-1.56.9-2.73 2.02-2.73.96 0 1.42.72 1.42 1.58 0 .96-.61 2.4-.93 3.74-.26 1.1.56 2.01 1.65 2.01 1.97 0 3.5-2.08 3.5-5.09 0-2.66-1.9-4.52-4.62-4.52-3.16 0-5.01 2.36-5.01 4.8 0 .95.37 1.96.82 2.52.1.11.1.2.08.31-.1.37-.3 1.16-.34 1.32-.05.21-.18.26-.4.16-1.5-.7-2.42-2.89-2.42-4.65 0-3.77 2.74-7.25 7.9-7.25 4.14 0 7.36 2.95 7.36 6.9 0 4.11-2.59 7.43-6.18 7.43-1.21 0-2.35-.63-2.74-1.37l-.74 2.84c-.27 1.04-1 2.35-1.49 3.14A12 12 0 1 0 12 0z"/>
      </svg>
      <span class="font-semibold text-gray-800 text-sm">${n.siteName||"Pinterest"}</span>
    </div>
  `,t+=`
    <div class="p-4">
      <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">${n.title||(s?"Pinterest Pin":"Pinterest Board")}</h3>
      <p class="text-sm text-gray-600 mb-2 line-clamp-2">${n.description||"View this content on Pinterest"}</p>
      <p class="text-xs text-gray-500 truncate">${e}</p>
    </div>
  `,t+=`
    <a href="${e}" target="_blank" rel="noopener noreferrer" 
       class="block w-full py-2 px-4 bg-red-600 hover:bg-red-700 text-white text-center text-sm font-medium transition-colors">
      Open in Pinterest
    </a>
  `,r.innerHTML=t,o.appendChild(r)}function C(e,o,n=null){e.innerHTML="";const s=document.createElement("div");if(s.className="p-4 bg-red-50 text-red-700 text-center",n){const r=document.createElement("a");r.href=n,r.target="_blank",r.rel="noopener noreferrer",r.className="underline hover:text-red-800",r.textContent=o+" - Open original",s.appendChild(r)}else s.textContent=o;e.appendChild(s)}function J(e,o){const n=document.createElement("div");n.className="bg-gray-100 animate-pulse p-4 h-32 flex items-center justify-center",n.innerHTML='<p class="text-gray-500">Loading LinkedIn content...</p>',o.appendChild(n),A(e).then(s=>{const r=document.createElement("div");r.className="linkedin-preview bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm";let t="";s.image&&(t+=`
        <div class="linkedin-preview-image-container w-full aspect-video bg-gray-100 overflow-hidden">
          <img src="${s.image}" alt="${s.title}" class="w-full h-full object-cover">
        </div>
      `),t+=`
      <div class="linkedin-preview-content p-4">
        <div class="flex items-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-blue-700 flex-shrink-0">
            <path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path>
          </svg>
          <span class="font-semibold text-gray-800 text-sm">${s.siteName}</span>
        </div>
        <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">${s.title}</h3>
        
        <!-- We're not showing any captions for LinkedIn posts to avoid mock content -->
        <!-- If we want to show captions in the future, we'll need to extract them from the actual LinkedIn posts -->
        
        <p class="text-sm text-gray-600 mb-2 line-clamp-2">${s.description}</p>
        <p class="text-xs text-gray-500 truncate">${e}</p>
      </div>
    `,t+=`
      <a href="${e}" target="_blank" rel="noopener noreferrer" 
         class="block w-full py-2 px-4 bg-blue-700 hover:bg-blue-800 text-white text-center text-sm font-medium transition-colors">
        Open in LinkedIn
      </a>
    `,r.innerHTML=t,n.remove(),o.appendChild(r)}).catch(s=>{console.error("Error fetching LinkedIn metadata:",s);const r=document.createElement("div");r.className="linkedin-preview bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",r.innerHTML=`
      <div class="linkedin-preview-content p-4">
        <div class="flex items-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-blue-700 flex-shrink-0">
            <path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path>
          </svg>
          <span class="font-semibold text-gray-800 text-sm">LinkedIn</span>
        </div>
        <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">LinkedIn Content</h3>
        <p class="text-sm text-gray-600 mb-2">View this content on LinkedIn, the world's largest professional network.</p>
        <p class="text-xs text-gray-500 truncate">${e}</p>
      </div>
      <a href="${e}" target="_blank" rel="noopener noreferrer" 
         class="block w-full py-2 px-4 bg-blue-700 hover:bg-blue-800 text-white text-center text-sm font-medium transition-colors">
        Open in LinkedIn
      </a>
    `,n.remove(),o.appendChild(r)})}function G(e,o){const n=document.createElement("div");n.className="bg-gray-100 animate-pulse p-4 h-48 flex items-center justify-center",n.innerHTML='<p class="text-gray-500">Loading tweet...</p>',o.appendChild(n);const s=ee(e);if(!s){L(o,"Invalid Twitter URL",e);return}const r=document.createElement("div");r.className="twitter-embed-container",o.appendChild(r);const t=()=>{window.twttr&&window.twttr.widgets?window.twttr.widgets.createTweet(s,r,{theme:"light",dnt:!0,align:"center"}).then(i=>{n.remove()}).catch(i=>{console.error("Error creating Twitter embed:",i),L(o,"Could not load tweet",e)}):setTimeout(t,1e3)};t()}function Y(e,o){const n=te(e);if(!n){L(o,"Invalid YouTube URL");return}const s=document.createElement("div");s.className="bg-gray-100 animate-pulse p-4 h-48 flex items-center justify-center",s.innerHTML='<p class="text-gray-500">Loading YouTube video...</p>',o.appendChild(s);const r=document.createElement("div");r.className="youtube-embed-container";const t=document.createElement("iframe");t.src=`https://www.youtube.com/embed/${n}?origin=${encodeURIComponent(window.location.origin)}&enablejsapi=1`,t.title="YouTube video player",t.setAttribute("frameborder","0"),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("allowfullscreen",""),t.setAttribute("loading","lazy"),t.setAttribute("referrerpolicy","strict-origin-when-cross-origin"),t.addEventListener("load",()=>{s&&s.parentNode&&s.remove()}),r.appendChild(t),o.appendChild(r)}function K(e,o){return H(e,o)}function Z(e,o){return z(e,o)}function Q(e,o){return J(e,o)}function X(e,o){const n=document.createElement("a");n.href=e,n.target="_blank",n.rel="noopener noreferrer",n.className="block p-4 hover:bg-gray-50 transition-colors";const s=document.createElement("div");s.className="flex items-center";const r=document.createElement("div");r.className="flex-shrink-0 mr-3",r.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
    </svg>
  `;const t=document.createElement("div");t.className="flex-1 overflow-hidden";const i=document.createElement("p");i.className="text-sm font-medium text-primary truncate",i.textContent=e;const d=document.createElement("p");d.className="text-xs text-gray-500 mt-1",d.textContent="Click to visit website",t.appendChild(i),t.appendChild(d),s.appendChild(r),s.appendChild(t),n.appendChild(s),o.appendChild(n)}function L(e,o,n=null){e.innerHTML="";const s=document.createElement("div");if(s.className="p-4 bg-red-50 text-red-700 text-center",n){const r=document.createElement("a");r.href=n,r.target="_blank",r.rel="noopener noreferrer",r.className="underline hover:text-red-800",r.textContent=o+" - Open original",s.appendChild(r)}else s.textContent=o;e.appendChild(s)}function ee(e){const o=/(?:twitter|x)\.com\/(?:#!\/)?(?:\w+)\/status(?:es)?\/(\d+)/i,n=e.match(o);if(n&&n[1])return n[1];const s=/(?:twitter|x)\.com\/(?:i\/web|intent)\/status\/(\d+)/i,r=e.match(s);return r?r[1]:""}function te(e){const o=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,n=e.match(o);return n?n[1]:""}function M(e,o=!1,n=!1){const s=document.createElement("span");s.className="tag",s.dataset.tag=e,o&&(s.classList.add("cursor-pointer","hover:bg-blue-200"),s.addEventListener("click",t=>{if(t.target.tagName==="BUTTON")return;const i=document.getElementById("tagFilter");let d=!1;for(let a=0;a<i.options.length;a++)if(i.options[a].value===e){d=!0;break}if(!d){const a=document.createElement("option");a.value=e,a.textContent=e,i.appendChild(a)}i.value=e,i.dispatchEvent(new Event("change"))}));const r=document.createElement("span");if(r.textContent=e,s.appendChild(r),n){const t=document.createElement("button");t.className="ml-1 text-blue-800 hover:text-red-500 focus:outline-none",t.innerHTML="&times;",t.setAttribute("aria-label",`Remove ${e} tag`),t.addEventListener("click",i=>{i.stopPropagation(),i.preventDefault();const d=new CustomEvent("tagDelete",{bubbles:!0,cancelable:!0,detail:{tag:e}});s.dispatchEvent(d)}),s.appendChild(t)}return s}function ne(e,o,n=null){if(o.innerHTML="",!e||e.length===0){const s=document.createElement("span");s.className="text-gray-400 text-sm italic",s.textContent="No tags",o.appendChild(s);return}e.forEach(s=>{const r=M(s,!0,!!n);n&&r.addEventListener("tagDelete",t=>{n(t.detail.tag)}),o.appendChild(r)})}function N(e,o,n){if(o.innerHTML="",!e||e.length===0)return;const s=document.createElement("p");s.className="text-sm text-gray-500 mb-2",s.textContent="Suggested tags:",o.appendChild(s);const r=document.createElement("div");r.className="flex flex-wrap gap-1",e.forEach(t=>{const i=M(t,!1,!1);i.classList.add("cursor-pointer","hover:bg-blue-200"),i.addEventListener("click",()=>{n(t)}),r.appendChild(i)}),o.appendChild(r)}function g(e){const o=new Set;return e.forEach(n=>{n.tags&&Array.isArray(n.tags)&&n.tags.forEach(s=>{o.add(s)})}),Array.from(o).sort()}const f="boardie_posts";function y(){try{const e=localStorage.getItem(f),o=e?JSON.parse(e):[];return h(o),v(g(o)),o}catch(e){return console.error("Error loading posts:",e),e instanceof SyntaxError&&(console.log("Attempting to recover from corrupted storage"),localStorage.removeItem(f)),[]}}function P(e){try{localStorage.setItem(f,JSON.stringify(e))}catch(o){console.error("Error saving posts:",o)}}function oe(e,o=[]){let n=[];try{const t=localStorage.getItem(f);n=t?JSON.parse(t):[]}catch(t){console.error("Error loading existing posts:",t),n=[]}const s=$(e),r={id:B(),url:e,platform:s,tags:o,dateAdded:new Date().toISOString()};n.push(r),P(n),h(n),v(g(n)),document.getElementById("noPostsMessage").classList.add("hidden")}function se(e){let o=[];try{const n=localStorage.getItem(f);o=n?JSON.parse(n):[]}catch(n){console.error("Error loading posts for deletion:",n);return}o=o.filter(n=>n.id!==e),P(o),h(o),v(g(o)),o.length===0&&S()}function h(e){const o=document.getElementById("postsGrid"),n=document.getElementById("postTemplate");o.innerHTML="";const s=[...e].sort((t,i)=>new Date(i.dateAdded)-new Date(t.dateAdded)),r=s.map(t=>{const i=document.importNode(n.content,!0).firstElementChild;i.dataset.id=t.id,i.dataset.platform=t.platform,i.dataset.url=t.url,i.classList.add("opacity-0");const d=i.querySelector(".post-platform");d.innerHTML=ce(t.platform);const a=i.querySelector(".post-date");a&&(a.textContent=le(t.dateAdded),a.title=new Date(t.dateAdded).toLocaleString());const m=i.querySelector(".post-embed"),l=t.platform==="twitter"?"500px":t.platform==="instagram"?"600px":"300px";m.innerHTML=`
      <div class="embed-placeholder bg-gray-100 animate-pulse flex items-center justify-center" 
           style="height: ${l}">
        <p class="text-gray-500">Loading ${t.platform} post...</p>
      </div>
    `;const c=i.querySelector(".post-tags");return ne(t.tags,c,p=>{ae(t.id,p)}),{element:i,post:t}});r.forEach(({element:t})=>{o.appendChild(t)}),r.forEach(({element:t,post:i},d)=>{setTimeout(()=>{const a=t.querySelector(".post-embed");re(i.url,i.platform,a);const m=()=>{const l=a.querySelector(".embed-placeholder");l&&l.remove(),t.classList.remove("opacity-0"),t.classList.add("opacity-100","transition-opacity","duration-500")};setTimeout(()=>{const l=a.querySelectorAll("iframe"),c=a.querySelectorAll("img");l.length===0&&c.length===0?m():(l.forEach(p=>{var u;p.complete||((u=p.contentDocument)==null?void 0:u.readyState)==="complete"?m():p.addEventListener("load",m,{once:!0})}),c.forEach(p=>{p.complete?m():p.addEventListener("load",m,{once:!0})}),setTimeout(m,3e3))},100)},d*100)}),s.length===0?S():document.getElementById("noPostsMessage").classList.add("hidden")}function re(e,o,n){switch(o.toLowerCase()){case"twitter":case"x":G(e,n);break;case"youtube":Y(e,n);break;case"instagram":K(e,n);break;case"pinterest":Z(e,n);break;case"linkedin":Q(e,n);break;default:X(e,n)}}function ie(e){let o=[];try{const n=localStorage.getItem(f);o=n?JSON.parse(n):[]}catch(n){console.error("Error loading posts for filtering:",n),o=[]}if(!e)h(o);else{const n=o.filter(s=>s.tags&&s.tags.includes(e));h(n)}}function ae(e,o){const n=y(),s=n.findIndex(r=>r.id===e);s!==-1&&(n[s].tags=n[s].tags.filter(r=>r!==o),P(n),h(n),v(g(n)))}function S(){document.getElementById("noPostsMessage").classList.remove("hidden")}function le(e){const o=new Date(e),s=Math.abs(new Date-o),r=Math.floor(s/(1e3*60*60*24)),t=Math.floor(s/(1e3*60*60)),i=Math.floor(s/(1e3*60));return i<1?"Just now":i<60?`${i} ${i===1?"minute":"minutes"} ago`:t<24?`${t} ${t===1?"hour":"hours"} ago`:r<7?`${r} ${r===1?"day":"days"} ago`:o.toLocaleDateString()}function ce(e){const o=e.toLowerCase();let n="";switch(o){case"twitter":case"x":return n='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg>',`${n} ${o==="x"?"Twitter":e}`;case"youtube":n='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg>';break;case"instagram":n='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z"></path></svg>';break;case"pinterest":n='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0a12 12 0 0 0-4.37 23.17c-.1-.94-.2-2.4.04-3.44.2-.84 1.3-5.34 1.3-5.34s-.33-.67-.33-1.66c0-1.56.9-2.73 2.02-2.73.96 0 1.42.72 1.42 1.58 0 .96-.61 2.4-.93 3.74-.26 1.1.56 2.01 1.65 2.01 1.97 0 3.5-2.08 3.5-5.09 0-2.66-1.9-4.52-4.62-4.52-3.16 0-5.01 2.36-5.01 4.8 0 .95.37 1.96.82 2.52.1.11.1.2.08.31-.1.37-.3 1.16-.34 1.32-.05.21-.18.26-.4.16-1.5-.7-2.42-2.89-2.42-4.65 0-3.77 2.74-7.25 7.9-7.25 4.14 0 7.36 2.95 7.36 6.9 0 4.11-2.59 7.43-6.18 7.43-1.21 0-2.35-.63-2.74-1.37l-.74 2.84c-.27 1.04-1 2.35-1.49 3.14A12 12 0 1 0 12 0z"/></svg>';break;case"linkedin":n='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>';break;default:n='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M14.8 3a2 2 0 0 1 1.4.6l4.2 4.2c.4.4.6.9.6 1.4V21a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h9.8zm-2.6 5.6V6H5v14h14v-8.8h-4.2a2 2 0 0 1-2-2V8.6h-.6zM16 2v5.4h5.4L16 2z"/></svg>'}return`${n} ${e.charAt(0).toUpperCase()+e.slice(1)}`}const I="boardie_posts";function de(){try{const e=localStorage.getItem(I),o=e?JSON.parse(e):[];if(!o||o.length===0){alert("No posts to export");return}const n={version:"0.1.0",timestamp:new Date().toISOString(),count:o.length,posts:o},s=JSON.stringify(n,null,2),r=new Blob([s],{type:"application/json"}),t=URL.createObjectURL(r),i=document.createElement("a");return i.href=t,i.download=`boardie-export-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t),!0}catch(e){return console.error("Error exporting posts:",e),alert("Failed to export posts: "+e.message),!1}}function me(e){return new Promise((o,n)=>{const s=new FileReader;s.onload=r=>{try{const t=JSON.parse(r.target.result);if(!t.posts||!Array.isArray(t.posts)){n(new Error("Invalid import file format"));return}const i=JSON.parse(localStorage.getItem(I)||"[]"),d=new Set(i.map(l=>l.id)),a=t.posts.filter(l=>!d.has(l.id)),m=[...i,...a];localStorage.setItem(I,JSON.stringify(m)),o({success:!0,totalImported:t.posts.length,newPostsAdded:a.length,duplicatesSkipped:t.posts.length-a.length})}catch(t){console.error("Error importing posts:",t),n(t)}},s.onerror=r=>{n(r)},s.readAsText(e)})}function pe(){const e=document.getElementById("addLinkBtn"),o=document.getElementById("addLinkForm"),n=document.getElementById("cancelAddLink"),s=document.getElementById("linkForm"),r=document.getElementById("tagFilter"),t=document.getElementById("menuBtn"),i=document.getElementById("menuDropdown"),d=document.getElementById("exportBtn"),a=document.getElementById("importFile"),m=document.getElementById("emptyStateAddBtn");e.addEventListener("click",()=>{o.classList.toggle("hidden"),document.getElementById("linkUrl").focus();const l=y(),c=g(l),p=document.getElementById("tagSuggestions");N(c,p,u=>{const w=document.getElementById("linkTags"),b=E(w.value);if(!b.includes(u)){const x=b.length>0?", ":"";w.value+=x+u}})}),n.addEventListener("click",()=>{o.classList.add("hidden"),s.reset(),document.getElementById("tagSuggestions").innerHTML=""}),s.addEventListener("submit",l=>{l.preventDefault();const c=document.getElementById("linkUrl").value.trim(),p=document.getElementById("linkTags").value.trim(),u=E(p);c&&(oe(c,u),s.reset(),o.classList.add("hidden"))}),r.addEventListener("change",l=>{const c=l.target.value;ie(c)}),document.getElementById("postsGrid").addEventListener("click",l=>{if(l.target.closest(".delete-post")){const c=l.target.closest(".post-card");c&&c.dataset.id&&confirm("Are you sure you want to delete this post?")&&se(c.dataset.id)}}),t.addEventListener("click",()=>{i.classList.toggle("hidden")}),document.addEventListener("click",l=>{!t.contains(l.target)&&!i.contains(l.target)&&i.classList.add("hidden")}),d.addEventListener("click",()=>{i.classList.add("hidden"),de()}),a.addEventListener("change",l=>{if(l.target.files.length>0){const c=l.target.files[0];me(c).then(p=>{alert(`Import successful! Added ${p.newPostsAdded} new posts. Skipped ${p.duplicatesSkipped} duplicates.`),window.location.reload()}).catch(p=>{alert("Import failed: "+p.message)}).finally(()=>{l.target.value=""})}}),m&&m.addEventListener("click",()=>{o.classList.remove("hidden"),document.getElementById("linkUrl").focus();const l=y(),c=g(l),p=document.getElementById("tagSuggestions");N(c,p,u=>{const w=document.getElementById("linkTags"),b=E(w.value);if(!b.includes(u)){const x=b.length>0?", ":"";w.value+=x+u}})})}function ue(){if(window.twttr){console.log("Twitter widgets already loaded");return}window.twttr=function(e,o,n){var s,r=e.getElementsByTagName(o)[0],t=window.twttr||{};return e.getElementById(n)||(s=e.createElement(o),s.id=n,s.src="https://platform.twitter.com/widgets.js",r.parentNode.insertBefore(s,r),t._e=[],t.ready=function(i){t._e.push(i)}),t}(document,"script","twitter-wjs"),window.twttr.ready(function(){console.log("Twitter widgets loaded and ready")})}document.addEventListener("DOMContentLoaded",()=>{console.log("Boardie application initialized"),ue(),pe(),y().length===0&&S()});
