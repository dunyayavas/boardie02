(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();function S(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function $(t){const n=t.toLowerCase();return n.includes("twitter.com")||n.includes("x.com")?"Twitter":n.includes("youtube.com")||n.includes("youtu.be")?"YouTube":n.includes("instagram.com")?"Instagram":n.includes("linkedin.com")?"LinkedIn":n.includes("pinterest.com")?"Pinterest":"Website"}function E(t){return t?t.split(",").map(n=>n.trim()).filter(n=>n.length>0):[]}function x(t){const n=document.getElementById("tagFilter");if(!n)return;const e=n.value;for(;n.options.length>1;)n.remove(1);if(t&&t.length>0){const r=[...t].sort();r.forEach(o=>{if(o&&o.trim()){const s=document.createElement("option");s.value=o,s.textContent=o,n.appendChild(s)}}),r.includes(e)&&(n.value=e)}}function A(t,n){const e=document.createElement("div");e.className="bg-gray-100 animate-pulse p-4 h-64 flex items-center justify-center",e.innerHTML='<p class="text-gray-500">Loading Instagram post...</p>',n.appendChild(e);const r=H(t);if(!r){O(n,"Invalid Instagram URL",t);return}const o=document.createElement("div");o.className="instagram-embed-container",o.innerHTML=`
    <blockquote 
      class="instagram-media" 
      data-instgrm-captioned 
      data-instgrm-permalink="https://www.instagram.com/p/${r}/" 
      data-instgrm-version="14">
      <a href="https://www.instagram.com/p/${r}/">View this post on Instagram</a>
    </blockquote>
  `,n.appendChild(o),U(),setTimeout(()=>{e&&e.parentNode&&e.remove()},5e3)}function H(t){const n=/instagram\.com\/(?:p|reel)\/([A-Za-z0-9_-]+)/i,e=t.match(n);return e?e[1]:""}function O(t,n,e=null){t.innerHTML="";const r=document.createElement("div");if(r.className="p-4 bg-red-50 text-red-700 text-center",e){const o=document.createElement("a");o.href=e,o.target="_blank",o.rel="noopener noreferrer",o.className="underline hover:text-red-800",o.textContent=n+" - Open original",r.appendChild(o)}else r.textContent=n;t.appendChild(r)}function U(){if(window.instgrm){window.instgrm.Embeds&&window.instgrm.Embeds.process&&window.instgrm.Embeds.process();return}if(!document.querySelector('script[src*="//www.instagram.com/embed.js"]')){const t=document.createElement("script");t.src="//www.instagram.com/embed.js",t.async=!0,t.defer=!0,document.body.appendChild(t),t.onload=()=>{window.instgrm&&window.instgrm.Embeds&&window.instgrm.Embeds.process&&window.instgrm.Embeds.process()}}}const D="https://link-preview-worker.dunyayavas.workers.dev";async function M(t){try{if(t.includes("linkedin.com")||t.includes("pinterest.com")){const n=`${D}?url=${encodeURIComponent(t)}`,e=await fetch(n);if(!e.ok)throw new Error(`Failed to fetch metadata: ${e.status}`);const r=await e.json();return!r.title||r.error?(console.warn("Falling back to generated metadata due to worker error:",r.error||"Missing title"),T(t)):(delete r.caption,r.realCaption=null,r)}else return{title:"Web Page",description:"No metadata available for this URL",image:null,url:t,siteName:new URL(t).hostname}}catch(n){return console.error("Error fetching metadata:",n),t.includes("linkedin.com")?T(t):t.includes("pinterest.com")?{title:"Pinterest",description:"View this content on Pinterest",image:"https://s.pinimg.com/webapp/favicon-56d11a4a.png",url:t,siteName:"Pinterest",realCaption:null}:{title:"Web Page",description:"Error fetching metadata",image:null,url:t,siteName:new URL(t).hostname}}}function T(t){const n=t.toLowerCase(),e={url:t,siteName:"LinkedIn"};let r="unknown";if(n.includes("/posts/")?r="post":n.includes("/pulse/")?r="article":n.includes("/in/")?r="profile":n.includes("/company/")&&(r="company"),e.image="https://cdn-icons-png.flaticon.com/512/174/174857.png",e.caption=j(r),e.realCaption=null,r==="profile"){const o=/linkedin\.com\/in\/([^\/\?#]+)/i,s=t.match(o);if(s&&s[1]){const a=s[1].replace(/-/g," ");e.title=`${a} | LinkedIn`,e.description=`View ${a}'s profile on LinkedIn, the world's largest professional community.`,e.image="https://cdn-icons-png.flaticon.com/512/3135/3135715.png"}}else if(r==="company"){const o=/linkedin\.com\/company\/([^\/\?#]+)/i,s=t.match(o);if(s&&s[1]){const a=s[1].replace(/-/g," ");e.title=`${a} | LinkedIn`,e.description=`Learn about ${a}, including available jobs, company insights, and more.`,e.image="https://cdn-icons-png.flaticon.com/512/2910/2910791.png"}}else if(r==="post"){const o=/linkedin\.com\/posts\/([^\/\?#]+)/i,s=t.match(o);if(s&&s[1]){const a=s[1].replace(/-/g," ");e.title=`LinkedIn Post by ${a}`,e.description=`Check out this post on LinkedIn by ${a}.`,e.image="https://cdn-icons-png.flaticon.com/512/5968/5968884.png"}}else if(r==="article"){const o=/linkedin\.com\/pulse\/([^\/\?#]+)(?:-([^\/\?#]+))?/i,s=t.match(o);if(s){const a=s[1]?s[1].replace(/-/g," "):"Article",l=s[2]?s[2].replace(/-/g," "):"";e.title=a.charAt(0).toUpperCase()+a.slice(1),e.description=l?`Article by ${l} on LinkedIn`:"Read this article on LinkedIn",e.image="https://cdn-icons-png.flaticon.com/512/2258/2258853.png"}}else e.title="LinkedIn",e.description="View this content on LinkedIn, the world's largest professional network.";return e}function j(t){const n={profile:"I am excited to share that I have joined a new company as a Senior Developer. Looking forward to this new journey! #NewBeginnings #CareerGrowth",company:"We are thrilled to announce our latest product launch! After months of hard work, our team has created something truly innovative. Check out the link to learn more. #ProductLaunch #Innovation",post:"Just finished an amazing project with my team. It is incredible what we can achieve when we collaborate effectively. #Teamwork #ProjectSuccess",article:"In my latest article, I discuss the future of remote work and how companies can adapt to this new normal. Read more to discover key strategies for success. #RemoteWork #FutureOfWork",unknown:"Sharing some thoughts on LinkedIn about professional development and career growth. What strategies have worked for you? #ProfessionalDevelopment"};return n[t]||n.unknown}function z(t,n){const e=document.createElement("div");e.className="bg-gray-100 animate-pulse p-4 h-64 flex items-center justify-center",e.innerHTML='<p class="text-gray-500">Loading Pinterest content...</p>',n.appendChild(e);const r=t.includes("/pin/"),o=t.includes("/board/")||/pinterest\.com\/([^\/]+)\/([^\/]+)\/?$/.test(t)&&!t.includes("/pin/");if(!r&&!o){k(n,"Invalid Pinterest URL",t);return}let s="",a={username:"",boardName:""};if(r){if(s=F(t),!s){k(n,"Invalid Pinterest pin URL",t);return}}else if(o&&(a=V(t),!a.username||!a.boardName)){k(n,"Invalid Pinterest board URL",t);return}M(t).then(l=>{_(t,n,l,r),e&&e.parentNode&&e.remove()}).catch(l=>{console.error("Error fetching Pinterest metadata:",l),R(t,n,r,s,a),e&&e.parentNode&&e.remove()})}function R(t,n,e,r,o){const s=document.createElement("div");s.className="pinterest-preview-card bg-white border border-gray-200 rounded-lg overflow-hidden";const a=document.createElement("div");a.className="flex items-center p-3 bg-red-50 border-b border-gray-200",a.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-6 h-6 mr-2 text-red-600">
      <path fill="currentColor" d="M12 0a12 12 0 0 0-4.37 23.17c-.1-.94-.2-2.4.04-3.44.2-.84 1.3-5.34 1.3-5.34s-.33-.67-.33-1.66c0-1.56.9-2.73 2.02-2.73.96 0 1.42.72 1.42 1.58 0 .96-.61 2.4-.93 3.74-.26 1.1.56 2.01 1.65 2.01 1.97 0 3.5-2.08 3.5-5.09 0-2.66-1.9-4.52-4.62-4.52-3.16 0-5.01 2.36-5.01 4.8 0 .95.37 1.96.82 2.52.1.11.1.2.08.31-.1.37-.3 1.16-.34 1.32-.05.21-.18.26-.4.16-1.5-.7-2.42-2.89-2.42-4.65 0-3.77 2.74-7.25 7.9-7.25 4.14 0 7.36 2.95 7.36 6.9 0 4.11-2.59 7.43-6.18 7.43-1.21 0-2.35-.63-2.74-1.37l-.74 2.84c-.27 1.04-1 2.35-1.49 3.14A12 12 0 1 0 12 0z"/>
    </svg>
    <span class="font-semibold text-gray-800">${e?"Pinterest Pin":"Pinterest Board"}</span>
  `;const l=document.createElement("div");l.className="w-full aspect-square bg-gray-100 flex items-center justify-center",l.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
    </svg>
  `;const c=document.createElement("div");c.className="p-4";const p=document.createElement("p");if(p.className="text-sm text-gray-600 mb-4",e)if(p.textContent="View this Pinterest pin to discover creative ideas and inspiration.",r){const d=document.createElement("p");d.className="text-xs text-gray-500 mt-2",d.textContent=`Pin ID: ${r}`,c.appendChild(p),c.appendChild(d)}else c.appendChild(p);else if(p.textContent="Explore this Pinterest board to discover a collection of related pins and ideas.",c.appendChild(p),o.username&&o.boardName){const d=document.createElement("p");d.className="text-xs text-gray-500 mt-2",d.textContent=`Board by ${o.username}: ${o.boardName.replace(/-/g," ")}`,c.appendChild(d)}const i=document.createElement("div");i.className="mt-2 text-xs text-gray-500 truncate",i.textContent=t,c.appendChild(i);const m=document.createElement("a");m.href=t,m.target="_blank",m.rel="noopener noreferrer",m.className="block w-full py-2 px-4 bg-red-600 hover:bg-red-700 text-white text-center rounded-b-lg transition-colors mt-4",m.textContent=e?"View Pin on Pinterest":"View Board on Pinterest",c.appendChild(m),s.appendChild(a),s.appendChild(l),s.appendChild(c),n.appendChild(s)}function F(t){const n=/pinterest\.com\/pin\/([0-9]+)/i,e=t.match(n);return e?e[1]:""}function V(t){let n="",e="";const r=/pinterest\.com\/([^\/]+)\/board\/([^\/]+)/i,o=t.match(r);if(o)n=o[1],e=o[2];else{const s=/pinterest\.com\/([^\/]+)\/([^\/]+)\/?$/i,a=t.match(s);a&&!t.includes("/pin/")&&(n=a[1],e=a[2])}return{username:n,boardName:e}}function _(t,n,e,r){const o=document.createElement("div");o.className="pinterest-preview-card bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm";let s="";e.image&&(s+=`
      <div class="pinterest-preview-image-container w-full aspect-square bg-gray-100 overflow-hidden">
        <img src="${e.image}" alt="${e.title||"Pinterest"}" class="w-full h-full object-cover">
      </div>
    `),s+=`
    <div class="flex items-center p-3 ${e.image?"border-t border-gray-200":"bg-red-50 border-b border-gray-200"}">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-red-600 flex-shrink-0">
        <path fill="currentColor" d="M12 0a12 12 0 0 0-4.37 23.17c-.1-.94-.2-2.4.04-3.44.2-.84 1.3-5.34 1.3-5.34s-.33-.67-.33-1.66c0-1.56.9-2.73 2.02-2.73.96 0 1.42.72 1.42 1.58 0 .96-.61 2.4-.93 3.74-.26 1.1.56 2.01 1.65 2.01 1.97 0 3.5-2.08 3.5-5.09 0-2.66-1.9-4.52-4.62-4.52-3.16 0-5.01 2.36-5.01 4.8 0 .95.37 1.96.82 2.52.1.11.1.2.08.31-.1.37-.3 1.16-.34 1.32-.05.21-.18.26-.4.16-1.5-.7-2.42-2.89-2.42-4.65 0-3.77 2.74-7.25 7.9-7.25 4.14 0 7.36 2.95 7.36 6.9 0 4.11-2.59 7.43-6.18 7.43-1.21 0-2.35-.63-2.74-1.37l-.74 2.84c-.27 1.04-1 2.35-1.49 3.14A12 12 0 1 0 12 0z"/>
      </svg>
      <span class="font-semibold text-gray-800 text-sm">${e.siteName||"Pinterest"}</span>
    </div>
  `,s+=`
    <div class="p-4">
      <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">${e.title||(r?"Pinterest Pin":"Pinterest Board")}</h3>
      <p class="text-sm text-gray-600 mb-2 line-clamp-2">${e.description||"View this content on Pinterest"}</p>
      <p class="text-xs text-gray-500 truncate">${t}</p>
    </div>
  `,s+=`
    <a href="${t}" target="_blank" rel="noopener noreferrer" 
       class="block w-full py-2 px-4 bg-red-600 hover:bg-red-700 text-white text-center text-sm font-medium transition-colors">
      Open in Pinterest
    </a>
  `,o.innerHTML=s,n.appendChild(o)}function k(t,n,e=null){t.innerHTML="";const r=document.createElement("div");if(r.className="p-4 bg-red-50 text-red-700 text-center",e){const o=document.createElement("a");o.href=e,o.target="_blank",o.rel="noopener noreferrer",o.className="underline hover:text-red-800",o.textContent=n+" - Open original",r.appendChild(o)}else r.textContent=n;t.appendChild(r)}function q(t,n){const e=document.createElement("div");e.className="bg-gray-100 animate-pulse p-4 h-32 flex items-center justify-center",e.innerHTML='<p class="text-gray-500">Loading LinkedIn content...</p>',n.appendChild(e),M(t).then(r=>{const o=document.createElement("div");o.className="linkedin-preview bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm";let s="";r.image&&(s+=`
        <div class="linkedin-preview-image-container w-full aspect-video bg-gray-100 overflow-hidden">
          <img src="${r.image}" alt="${r.title}" class="w-full h-full object-cover">
        </div>
      `),s+=`
      <div class="linkedin-preview-content p-4">
        <div class="flex items-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-blue-700 flex-shrink-0">
            <path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path>
          </svg>
          <span class="font-semibold text-gray-800 text-sm">${r.siteName}</span>
        </div>
        <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">${r.title}</h3>
        
        <!-- We're not showing any captions for LinkedIn posts to avoid mock content -->
        <!-- If we want to show captions in the future, we'll need to extract them from the actual LinkedIn posts -->
        
        <p class="text-sm text-gray-600 mb-2 line-clamp-2">${r.description}</p>
        <p class="text-xs text-gray-500 truncate">${t}</p>
      </div>
    `,s+=`
      <a href="${t}" target="_blank" rel="noopener noreferrer" 
         class="block w-full py-2 px-4 bg-blue-700 hover:bg-blue-800 text-white text-center text-sm font-medium transition-colors">
        Open in LinkedIn
      </a>
    `,o.innerHTML=s,e.remove(),n.appendChild(o)}).catch(r=>{console.error("Error fetching LinkedIn metadata:",r);const o=document.createElement("div");o.className="linkedin-preview bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",o.innerHTML=`
      <div class="linkedin-preview-content p-4">
        <div class="flex items-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-blue-700 flex-shrink-0">
            <path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path>
          </svg>
          <span class="font-semibold text-gray-800 text-sm">LinkedIn</span>
        </div>
        <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">LinkedIn Content</h3>
        <p class="text-sm text-gray-600 mb-2">View this content on LinkedIn, the world's largest professional network.</p>
        <p class="text-xs text-gray-500 truncate">${t}</p>
      </div>
      <a href="${t}" target="_blank" rel="noopener noreferrer" 
         class="block w-full py-2 px-4 bg-blue-700 hover:bg-blue-800 text-white text-center text-sm font-medium transition-colors">
        Open in LinkedIn
      </a>
    `,e.remove(),n.appendChild(o)})}function J(t,n){const e=document.createElement("div");e.className="bg-gray-100 animate-pulse p-4 h-48 flex items-center justify-center",e.innerHTML='<p class="text-gray-500">Loading tweet...</p>',n.appendChild(e);const r=Q(t);if(!r){L(n,"Invalid Twitter URL",t);return}const o=document.createElement("div");o.className="twitter-embed-container",n.appendChild(o);const s=()=>{window.twttr&&window.twttr.widgets?window.twttr.widgets.createTweet(r,o,{theme:"light",dnt:!0,align:"center"}).then(a=>{e.remove()}).catch(a=>{console.error("Error creating Twitter embed:",a),L(n,"Could not load tweet",t)}):setTimeout(s,1e3)};s()}function W(t,n){const e=X(t);if(!e){L(n,"Invalid YouTube URL");return}const r=document.createElement("div");r.className="relative pt-[56.25%]";const o=document.createElement("iframe");o.className="absolute top-0 left-0 w-full h-full",o.src=`https://www.youtube.com/embed/${e}`,o.title="YouTube video player",o.frameBorder="0",o.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",o.allowFullscreen=!0,r.appendChild(o),n.appendChild(r)}function G(t,n){return A(t,n)}function Y(t,n){return z(t,n)}function K(t,n){return q(t,n)}function Z(t,n){const e=document.createElement("a");e.href=t,e.target="_blank",e.rel="noopener noreferrer",e.className="block p-4 hover:bg-gray-50 transition-colors";const r=document.createElement("div");r.className="flex items-center";const o=document.createElement("div");o.className="flex-shrink-0 mr-3",o.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
    </svg>
  `;const s=document.createElement("div");s.className="flex-1 overflow-hidden";const a=document.createElement("p");a.className="text-sm font-medium text-primary truncate",a.textContent=t;const l=document.createElement("p");l.className="text-xs text-gray-500 mt-1",l.textContent="Click to visit website",s.appendChild(a),s.appendChild(l),r.appendChild(o),r.appendChild(s),e.appendChild(r),n.appendChild(e)}function L(t,n,e=null){t.innerHTML="";const r=document.createElement("div");if(r.className="p-4 bg-red-50 text-red-700 text-center",e){const o=document.createElement("a");o.href=e,o.target="_blank",o.rel="noopener noreferrer",o.className="underline hover:text-red-800",o.textContent=n+" - Open original",r.appendChild(o)}else r.textContent=n;t.appendChild(r)}function Q(t){const n=/(?:twitter|x)\.com\/(?:#!\/)?(?:\w+)\/status(?:es)?\/(\d+)/i,e=t.match(n);if(e&&e[1])return e[1];const r=/(?:twitter|x)\.com\/(?:i\/web|intent)\/status\/(\d+)/i,o=t.match(r);return o?o[1]:""}function X(t){const n=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,e=t.match(n);return e?e[1]:""}function B(t,n=!1,e=!1){const r=document.createElement("span");r.className="tag",r.dataset.tag=t,n&&(r.classList.add("cursor-pointer","hover:bg-blue-200"),r.addEventListener("click",s=>{if(s.target.tagName==="BUTTON")return;const a=document.getElementById("tagFilter");let l=!1;for(let c=0;c<a.options.length;c++)if(a.options[c].value===t){l=!0;break}if(!l){const c=document.createElement("option");c.value=t,c.textContent=t,a.appendChild(c)}a.value=t,a.dispatchEvent(new Event("change"))}));const o=document.createElement("span");if(o.textContent=t,r.appendChild(o),e){const s=document.createElement("button");s.className="ml-1 text-blue-800 hover:text-red-500 focus:outline-none",s.innerHTML="&times;",s.setAttribute("aria-label",`Remove ${t} tag`),s.addEventListener("click",a=>{a.stopPropagation(),a.preventDefault();const l=new CustomEvent("tagDelete",{bubbles:!0,cancelable:!0,detail:{tag:t}});r.dispatchEvent(l)}),r.appendChild(s)}return r}function ee(t,n,e=null){if(n.innerHTML="",!t||t.length===0){const r=document.createElement("span");r.className="text-gray-400 text-sm italic",r.textContent="No tags",n.appendChild(r);return}t.forEach(r=>{const o=B(r,!0,!!e);e&&o.addEventListener("tagDelete",s=>{e(s.detail.tag)}),n.appendChild(o)})}function N(t,n,e){if(n.innerHTML="",!t||t.length===0)return;const r=document.createElement("p");r.className="text-sm text-gray-500 mb-2",r.textContent="Suggested tags:",n.appendChild(r);const o=document.createElement("div");o.className="flex flex-wrap gap-1",t.forEach(s=>{const a=B(s,!1,!1);a.classList.add("cursor-pointer","hover:bg-blue-200"),a.addEventListener("click",()=>{e(s)}),o.appendChild(a)}),n.appendChild(o)}function g(t){const n=new Set;return t.forEach(e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach(r=>{n.add(r)})}),Array.from(n).sort()}const f="boardie_posts";function b(){try{const t=localStorage.getItem(f),n=t?JSON.parse(t):[];return h(n),x(g(n)),n}catch(t){return console.error("Error loading posts:",t),t instanceof SyntaxError&&(console.log("Attempting to recover from corrupted storage"),localStorage.removeItem(f)),[]}}function I(t){try{localStorage.setItem(f,JSON.stringify(t))}catch(n){console.error("Error saving posts:",n)}}function te(t,n=[]){let e=[];try{const s=localStorage.getItem(f);e=s?JSON.parse(s):[]}catch(s){console.error("Error loading existing posts:",s),e=[]}const r=$(t),o={id:S(),url:t,platform:r,tags:n,dateAdded:new Date().toISOString()};e.push(o),I(e),h(e),x(g(e)),document.getElementById("noPostsMessage").classList.add("hidden")}function ne(t){let n=[];try{const e=localStorage.getItem(f);n=e?JSON.parse(e):[]}catch(e){console.error("Error loading posts for deletion:",e);return}n=n.filter(e=>e.id!==t),I(n),h(n),x(g(n)),n.length===0&&P()}function h(t){const n=document.getElementById("postsGrid"),e=document.getElementById("postTemplate");n.innerHTML="";const r=[...t].sort((s,a)=>new Date(a.dateAdded)-new Date(s.dateAdded)),o=r.map(s=>{const a=document.importNode(e.content,!0).firstElementChild;a.dataset.id=s.id,a.dataset.platform=s.platform,a.dataset.url=s.url,a.classList.add("opacity-0");const l=a.querySelector(".post-platform");l.innerHTML=ie(s.platform);const c=a.querySelector(".post-date");c&&(c.textContent=ae(s.dateAdded),c.title=new Date(s.dateAdded).toLocaleString());const p=a.querySelector(".post-embed"),i=s.platform==="twitter"?"500px":s.platform==="instagram"?"600px":"300px";p.innerHTML=`
      <div class="embed-placeholder bg-gray-100 animate-pulse flex items-center justify-center" 
           style="height: ${i}">
        <p class="text-gray-500">Loading ${s.platform} post...</p>
      </div>
    `;const m=a.querySelector(".post-tags");return ee(s.tags,m,d=>{se(s.id,d)}),{element:a,post:s}});o.forEach(({element:s})=>{n.appendChild(s)}),o.forEach(({element:s,post:a},l)=>{setTimeout(()=>{const c=s.querySelector(".post-embed");oe(a.url,a.platform,c);const p=()=>{const i=c.querySelector(".embed-placeholder");i&&i.remove(),s.classList.remove("opacity-0"),s.classList.add("opacity-100","transition-opacity","duration-500")};setTimeout(()=>{const i=c.querySelectorAll("iframe"),m=c.querySelectorAll("img");i.length===0&&m.length===0?p():(i.forEach(d=>{var u;d.complete||((u=d.contentDocument)==null?void 0:u.readyState)==="complete"?p():d.addEventListener("load",p,{once:!0})}),m.forEach(d=>{d.complete?p():d.addEventListener("load",p,{once:!0})}),setTimeout(p,3e3))},100)},l*100)}),r.length===0?P():document.getElementById("noPostsMessage").classList.add("hidden")}function oe(t,n,e){switch(n.toLowerCase()){case"twitter":case"x":J(t,e);break;case"youtube":W(t,e);break;case"instagram":G(t,e);break;case"pinterest":Y(t,e);break;case"linkedin":K(t,e);break;default:Z(t,e)}}function re(t){let n=[];try{const e=localStorage.getItem(f);n=e?JSON.parse(e):[]}catch(e){console.error("Error loading posts for filtering:",e),n=[]}if(!t)h(n);else{const e=n.filter(r=>r.tags&&r.tags.includes(t));h(e)}}function se(t,n){const e=b(),r=e.findIndex(o=>o.id===t);r!==-1&&(e[r].tags=e[r].tags.filter(o=>o!==n),I(e),h(e),x(g(e)))}function P(){document.getElementById("noPostsMessage").classList.remove("hidden")}function ae(t){const n=new Date(t),r=Math.abs(new Date-n),o=Math.floor(r/(1e3*60*60*24)),s=Math.floor(r/(1e3*60*60)),a=Math.floor(r/(1e3*60));return a<1?"Just now":a<60?`${a} ${a===1?"minute":"minutes"} ago`:s<24?`${s} ${s===1?"hour":"hours"} ago`:o<7?`${o} ${o===1?"day":"days"} ago`:n.toLocaleDateString()}function ie(t){const n=t.toLowerCase();let e="";switch(n){case"twitter":case"x":return e='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg>',`${e} ${n==="x"?"Twitter":t}`;case"youtube":e='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg>';break;case"instagram":e='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z"></path></svg>';break;case"pinterest":e='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0a12 12 0 0 0-4.37 23.17c-.1-.94-.2-2.4.04-3.44.2-.84 1.3-5.34 1.3-5.34s-.33-.67-.33-1.66c0-1.56.9-2.73 2.02-2.73.96 0 1.42.72 1.42 1.58 0 .96-.61 2.4-.93 3.74-.26 1.1.56 2.01 1.65 2.01 1.97 0 3.5-2.08 3.5-5.09 0-2.66-1.9-4.52-4.62-4.52-3.16 0-5.01 2.36-5.01 4.8 0 .95.37 1.96.82 2.52.1.11.1.2.08.31-.1.37-.3 1.16-.34 1.32-.05.21-.18.26-.4.16-1.5-.7-2.42-2.89-2.42-4.65 0-3.77 2.74-7.25 7.9-7.25 4.14 0 7.36 2.95 7.36 6.9 0 4.11-2.59 7.43-6.18 7.43-1.21 0-2.35-.63-2.74-1.37l-.74 2.84c-.27 1.04-1 2.35-1.49 3.14A12 12 0 1 0 12 0z"/></svg>';break;case"linkedin":e='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>';break;default:e='<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="currentColor"><path d="M14.8 3a2 2 0 0 1 1.4.6l4.2 4.2c.4.4.6.9.6 1.4V21a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h9.8zm-2.6 5.6V6H5v14h14v-8.8h-4.2a2 2 0 0 1-2-2V8.6h-.6zM16 2v5.4h5.4L16 2z"/></svg>'}return`${e} ${t.charAt(0).toUpperCase()+t.slice(1)}`}const C="boardie_posts";function ce(){try{const t=localStorage.getItem(C),n=t?JSON.parse(t):[];if(!n||n.length===0){alert("No posts to export");return}const e={version:"0.1.0",timestamp:new Date().toISOString(),count:n.length,posts:n},r=JSON.stringify(e,null,2),o=new Blob([r],{type:"application/json"}),s=URL.createObjectURL(o),a=document.createElement("a");return a.href=s,a.download=`boardie-export-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),!0}catch(t){return console.error("Error exporting posts:",t),alert("Failed to export posts: "+t.message),!1}}function le(t){return new Promise((n,e)=>{const r=new FileReader;r.onload=o=>{try{const s=JSON.parse(o.target.result);if(!s.posts||!Array.isArray(s.posts)){e(new Error("Invalid import file format"));return}const a=JSON.parse(localStorage.getItem(C)||"[]"),l=new Set(a.map(i=>i.id)),c=s.posts.filter(i=>!l.has(i.id)),p=[...a,...c];localStorage.setItem(C,JSON.stringify(p)),n({success:!0,totalImported:s.posts.length,newPostsAdded:c.length,duplicatesSkipped:s.posts.length-c.length})}catch(s){console.error("Error importing posts:",s),e(s)}},r.onerror=o=>{e(o)},r.readAsText(t)})}function de(){const t=document.getElementById("addLinkBtn"),n=document.getElementById("addLinkForm"),e=document.getElementById("cancelAddLink"),r=document.getElementById("linkForm"),o=document.getElementById("tagFilter"),s=document.getElementById("menuBtn"),a=document.getElementById("menuDropdown"),l=document.getElementById("exportBtn"),c=document.getElementById("importFile"),p=document.getElementById("emptyStateAddBtn");t.addEventListener("click",()=>{n.classList.toggle("hidden"),document.getElementById("linkUrl").focus();const i=b(),m=g(i),d=document.getElementById("tagSuggestions");N(m,d,u=>{const w=document.getElementById("linkTags"),v=E(w.value);if(!v.includes(u)){const y=v.length>0?", ":"";w.value+=y+u}})}),e.addEventListener("click",()=>{n.classList.add("hidden"),r.reset(),document.getElementById("tagSuggestions").innerHTML=""}),r.addEventListener("submit",i=>{i.preventDefault();const m=document.getElementById("linkUrl").value.trim(),d=document.getElementById("linkTags").value.trim(),u=E(d);m&&(te(m,u),r.reset(),n.classList.add("hidden"))}),o.addEventListener("change",i=>{const m=i.target.value;re(m)}),document.getElementById("postsGrid").addEventListener("click",i=>{if(i.target.closest(".delete-post")){const m=i.target.closest(".post-card");m&&m.dataset.id&&confirm("Are you sure you want to delete this post?")&&ne(m.dataset.id)}}),s.addEventListener("click",()=>{a.classList.toggle("hidden")}),document.addEventListener("click",i=>{!s.contains(i.target)&&!a.contains(i.target)&&a.classList.add("hidden")}),l.addEventListener("click",()=>{a.classList.add("hidden"),ce()}),c.addEventListener("change",i=>{if(i.target.files.length>0){const m=i.target.files[0];le(m).then(d=>{alert(`Import successful! Added ${d.newPostsAdded} new posts. Skipped ${d.duplicatesSkipped} duplicates.`),window.location.reload()}).catch(d=>{alert("Import failed: "+d.message)}).finally(()=>{i.target.value=""})}}),p&&p.addEventListener("click",()=>{n.classList.remove("hidden"),document.getElementById("linkUrl").focus();const i=b(),m=g(i),d=document.getElementById("tagSuggestions");N(m,d,u=>{const w=document.getElementById("linkTags"),v=E(w.value);if(!v.includes(u)){const y=v.length>0?", ":"";w.value+=y+u}})})}function me(){if(window.twttr){console.log("Twitter widgets already loaded");return}window.twttr=function(t,n,e){var r,o=t.getElementsByTagName(n)[0],s=window.twttr||{};return t.getElementById(e)||(r=t.createElement(n),r.id=e,r.src="https://platform.twitter.com/widgets.js",o.parentNode.insertBefore(r,o),s._e=[],s.ready=function(a){s._e.push(a)}),s}(document,"script","twitter-wjs"),window.twttr.ready(function(){console.log("Twitter widgets loaded and ready")})}document.addEventListener("DOMContentLoaded",()=>{console.log("Boardie application initialized"),me(),de(),b().length===0&&P()});
