(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Q(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function W(e){const t=e.toLowerCase();return t.includes("twitter.com")||t.includes("x.com")?"Twitter":t.includes("youtube.com")||t.includes("youtu.be")?"YouTube":t.includes("instagram.com")?"Instagram":t.includes("linkedin.com")?"LinkedIn":t.includes("pinterest.com")?"Pinterest":t.includes("tiktok.com")||t.includes("vm.tiktok.com")?"TikTok":"Website"}function C(e){return e?e.split(",").map(t=>t.trim()).filter(t=>t.length>0):[]}function B(e){const t=document.getElementById("tagFilter");if(!t)return;const n=t.value;for(;t.options.length>1;)t.remove(1);if(e&&e.length>0){const i=[...e].sort();i.forEach(s=>{if(s&&s.trim()){const o=document.createElement("option");o.value=s,o.textContent=s,t.appendChild(o)}}),i.includes(n)&&(t.value=n)}}function X(e,t){const n=ee(e);if(!n){te(t,"Invalid Instagram URL",e);return}const i=document.createElement("div");i.className="instagram-embed-container",i.innerHTML=`
    <blockquote 
      class="instagram-media" 
      data-instgrm-captioned 
      data-instgrm-permalink="https://www.instagram.com/p/${n}/" 
      data-instgrm-version="14">
      <a href="https://www.instagram.com/p/${n}/">View this post on Instagram</a>
    </blockquote>
  `,t.appendChild(i),ne()}function ee(e){const t=/instagram\.com\/(?:p|reel)\/([A-Za-z0-9_-]+)/i,n=e.match(t);return n?n[1]:""}function te(e,t,n=null){e.innerHTML="";const i=document.createElement("div");if(i.className="p-4 bg-red-50 text-red-700 text-center",n){const s=document.createElement("a");s.href=n,s.target="_blank",s.rel="noopener noreferrer",s.className="underline hover:text-red-800",s.textContent=t+" - Open original",i.appendChild(s)}else i.textContent=t;e.appendChild(i)}function ne(){if(window.instgrm){window.instgrm.Embeds&&window.instgrm.Embeds.process&&window.instgrm.Embeds.process();return}if(!document.querySelector('script[src*="//www.instagram.com/embed.js"]')){const e=document.createElement("script");e.src="//www.instagram.com/embed.js",e.async=!0,e.defer=!0,document.body.appendChild(e),e.onload=()=>{window.instgrm&&window.instgrm.Embeds&&window.instgrm.Embeds.process&&window.instgrm.Embeds.process()}}}const oe="https://link-preview-worker.dunyayavas.workers.dev";async function _(e){try{if(e.includes("linkedin.com")||e.includes("pinterest.com")){const t=`${oe}?url=${encodeURIComponent(e)}`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch metadata: ${n.status}`);const i=await n.json();return!i.title||i.error?(console.warn("Falling back to generated metadata due to worker error:",i.error||"Missing title"),R(e)):(delete i.caption,i.realCaption=null,i)}else return{title:"Web Page",description:"No metadata available for this URL",image:null,url:e,siteName:new URL(e).hostname}}catch(t){return console.error("Error fetching metadata:",t),e.includes("linkedin.com")?R(e):e.includes("pinterest.com")?{title:"Pinterest",description:"View this content on Pinterest",image:"https://s.pinimg.com/webapp/favicon-56d11a4a.png",url:e,siteName:"Pinterest",realCaption:null}:{title:"Web Page",description:"Error fetching metadata",image:null,url:e,siteName:new URL(e).hostname}}}function R(e){const t=e.toLowerCase(),n={url:e,siteName:"LinkedIn"};let i="unknown";if(t.includes("/posts/")?i="post":t.includes("/pulse/")?i="article":t.includes("/in/")?i="profile":t.includes("/company/")&&(i="company"),n.image="https://cdn-icons-png.flaticon.com/512/174/174857.png",n.caption=ie(i),n.realCaption=null,i==="profile"){const s=/linkedin\.com\/in\/([^\/\?#]+)/i,o=e.match(s);if(o&&o[1]){const r=o[1].replace(/-/g," ");n.title=`${r} | LinkedIn`,n.description=`View ${r}'s profile on LinkedIn, the world's largest professional community.`,n.image="https://cdn-icons-png.flaticon.com/512/3135/3135715.png"}}else if(i==="company"){const s=/linkedin\.com\/company\/([^\/\?#]+)/i,o=e.match(s);if(o&&o[1]){const r=o[1].replace(/-/g," ");n.title=`${r} | LinkedIn`,n.description=`Learn about ${r}, including available jobs, company insights, and more.`,n.image="https://cdn-icons-png.flaticon.com/512/2910/2910791.png"}}else if(i==="post"){const s=/linkedin\.com\/posts\/([^\/\?#]+)/i,o=e.match(s);if(o&&o[1]){const r=o[1].replace(/-/g," ");n.title=`LinkedIn Post by ${r}`,n.description=`Check out this post on LinkedIn by ${r}.`,n.image="https://cdn-icons-png.flaticon.com/512/5968/5968884.png"}}else if(i==="article"){const s=/linkedin\.com\/pulse\/([^\/\?#]+)(?:-([^\/\?#]+))?/i,o=e.match(s);if(o){const r=o[1]?o[1].replace(/-/g," "):"Article",m=o[2]?o[2].replace(/-/g," "):"";n.title=r.charAt(0).toUpperCase()+r.slice(1),n.description=m?`Article by ${m} on LinkedIn`:"Read this article on LinkedIn",n.image="https://cdn-icons-png.flaticon.com/512/2258/2258853.png"}}else n.title="LinkedIn",n.description="View this content on LinkedIn, the world's largest professional network.";return n}function ie(e){const t={profile:"I am excited to share that I have joined a new company as a Senior Developer. Looking forward to this new journey! #NewBeginnings #CareerGrowth",company:"We are thrilled to announce our latest product launch! After months of hard work, our team has created something truly innovative. Check out the link to learn more. #ProductLaunch #Innovation",post:"Just finished an amazing project with my team. It is incredible what we can achieve when we collaborate effectively. #Teamwork #ProjectSuccess",article:"In my latest article, I discuss the future of remote work and how companies can adapt to this new normal. Read more to discover key strategies for success. #RemoteWork #FutureOfWork",unknown:"Sharing some thoughts on LinkedIn about professional development and career growth. What strategies have worked for you? #ProfessionalDevelopment"};return t[e]||t.unknown}function se(e,t){const n=document.createElement("div");n.className="bg-gray-100 animate-pulse p-4 h-64 flex items-center justify-center",n.innerHTML='<p class="text-gray-500">Loading Pinterest content...</p>',t.appendChild(n);const i=e.includes("/pin/"),s=e.includes("/board/")||/pinterest\.com\/([^\/]+)\/([^\/]+)\/?$/.test(e)&&!e.includes("/pin/");if(!i&&!s){N(t,"Invalid Pinterest URL",e);return}let o="",r={username:"",boardName:""};if(i){if(o=ae(e),!o){N(t,"Invalid Pinterest pin URL",e);return}}else if(s&&(r=ce(e),!r.username||!r.boardName)){N(t,"Invalid Pinterest board URL",e);return}t.querySelectorAll(".pinterest-official-embed, .pinterest-fallback-container").forEach(l=>l.remove());const d=document.createElement("div");if(d.className="pinterest-official-embed",d.style.display="block",i){const l=document.createElement("a");l.href=e,l.setAttribute("data-pin-do","embedPin"),l.setAttribute("data-pin-width","large"),d.appendChild(l)}else if(s){const l=document.createElement("a");l.href=e,l.setAttribute("data-pin-do","embedBoard"),l.setAttribute("data-pin-board-width","180"),l.setAttribute("data-pin-scale-height","400"),l.setAttribute("data-pin-scale-width","60"),l.setAttribute("data-pin-columns","3"),d.appendChild(l)}t.appendChild(d);const c=document.createElement("div");c.className="pinterest-fallback-container",c.style.display="none",t.appendChild(c),de(),setTimeout(()=>{d.querySelector("iframe, span[data-pin-href]")?(c.style.display="none",d.style.display="block"):(console.log("Pinterest official embed failed to load, using fallback"),d.style.display="none",c.style.display="block",_(e).then(h=>{le(e,c,h,i)}).catch(h=>{console.error("Error fetching Pinterest metadata:",h),re(e,c,i,o,r)}))},3e3),n&&n.parentNode&&n.remove()}function re(e,t,n,i,s){const o=document.createElement("div");o.className="pinterest-preview-card bg-white border border-gray-200 rounded-lg overflow-hidden";const r=document.createElement("div");r.className="flex items-center p-3 bg-red-50 border-b border-gray-200",r.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-6 h-6 mr-2 text-red-600">
      <path fill="currentColor" d="M12 0a12 12 0 0 0-4.37 23.17c-.1-.94-.2-2.4.04-3.44.2-.84 1.3-5.34 1.3-5.34s-.33-.67-.33-1.66c0-1.56.9-2.73 2.02-2.73.96 0 1.42.72 1.42 1.58 0 .96-.61 2.4-.93 3.74-.26 1.1.56 2.01 1.65 2.01 1.97 0 3.5-2.08 3.5-5.09 0-2.66-1.9-4.52-4.62-4.52-3.16 0-5.01 2.36-5.01 4.8 0 .95.37 1.96.82 2.52.1.11.1.2.08.31-.1.37-.3 1.16-.34 1.32-.05.21-.18.26-.4.16-1.5-.7-2.42-2.89-2.42-4.65 0-3.77 2.74-7.25 7.9-7.25 4.14 0 7.36 2.95 7.36 6.9 0 4.11-2.59 7.43-6.18 7.43-1.21 0-2.35-.63-2.74-1.37l-.74 2.84c-.27 1.04-1 2.35-1.49 3.14A12 12 0 1 0 12 0z"/>
    </svg>
    <span class="font-semibold text-gray-800">${n?"Pinterest Pin":"Pinterest Board"}</span>
  `;const m=document.createElement("div");m.className="w-full aspect-square bg-gray-100 flex items-center justify-center",m.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
    </svg>
  `;const d=document.createElement("div");d.className="p-4";const c=document.createElement("p");if(c.className="text-sm text-gray-600 mb-4",n)if(c.textContent="View this Pinterest pin to discover creative ideas and inspiration.",i){const w=document.createElement("p");w.className="text-xs text-gray-500 mt-2",w.textContent=`Pin ID: ${i}`,d.appendChild(c),d.appendChild(w)}else d.appendChild(c);else if(c.textContent="Explore this Pinterest board to discover a collection of related pins and ideas.",d.appendChild(c),s.username&&s.boardName){const w=document.createElement("p");w.className="text-xs text-gray-500 mt-2",w.textContent=`Board by ${s.username}: ${s.boardName.replace(/-/g," ")}`,d.appendChild(w)}const l=document.createElement("div");l.className="mt-2 text-xs text-gray-500 truncate",l.textContent=e,d.appendChild(l);const h=document.createElement("a");h.href=e,h.target="_blank",h.rel="noopener noreferrer",h.className="block w-full py-2 px-4 bg-red-600 hover:bg-red-700 text-white text-center rounded-b-lg transition-colors mt-4",h.textContent=n?"View Pin on Pinterest":"View Board on Pinterest",d.appendChild(h),o.appendChild(r),o.appendChild(m),o.appendChild(d),t.appendChild(o)}function ae(e){const t=/pinterest\.com\/pin\/([0-9]+)/i,n=e.match(t);return n?n[1]:""}function ce(e){let t="",n="";const i=/pinterest\.com\/([^\/]+)\/board\/([^\/]+)/i,s=e.match(i);if(s)t=s[1],n=s[2];else{const o=/pinterest\.com\/([^\/]+)\/([^\/]+)\/?$/i,r=e.match(o);r&&!e.includes("/pin/")&&(t=r[1],n=r[2])}return{username:t,boardName:n}}function de(){if(window.PinUtils&&window.PinUtils.build){console.log("Pinterest widgets already loaded"),window.PinUtils.build(),setTimeout($,500);return}if(document.getElementById("pinterest-widget-script")){console.log("Pinterest script is loading...");return}console.log("Loading Pinterest widget script");const e=document.createElement("script");e.id="pinterest-widget-script",e.async=!0,e.defer=!0,e.src="https://assets.pinterest.com/js/pinit.js",e.onload=function(){if(console.log("Pinterest widget script loaded"),window.PinUtils&&window.PinUtils.build){console.log("Building Pinterest widgets"),window.PinUtils.build(),setTimeout($,500);let t=0;const n=setInterval(()=>{if(t>=10){clearInterval(n);return}window.PinUtils&&window.PinUtils.build&&(console.log("Rebuilding Pinterest widgets (delayed)"),window.PinUtils.build(),$()),t++},500)}},document.body.appendChild(e)}function $(){console.log("Adjusting Pinterest embeds to fit properly"),document.querySelectorAll(".pinterest-official-embed").forEach(t=>{t.style.textAlign="center",t.style.width="100%",t.style.maxWidth="100%",t.style.margin="0 auto",t.querySelectorAll("iframe").forEach(o=>{o.width<300&&(o.style.minWidth="300px"),o.style.maxWidth="100%"}),t.querySelectorAll('[data-pin-do="embedPin"]').forEach(o=>{o.style.margin="0 auto",o.style.display="block"}),t.querySelectorAll('[data-pin-do="embedBoard"]').forEach(o=>{o.style.width="100%",o.style.maxWidth="100%",o.hasAttribute("data-pin-columns")||o.setAttribute("data-pin-columns","1"),o.parentNode&&(o.parentNode.style.width="100%"),t.querySelectorAll(".pinterest-board-widget").forEach(m=>{m.style.maxWidth="100%",m.style.width="100%"})})})}function le(e,t,n,i){const s=document.createElement("div");s.className="pinterest-preview-card bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm";let o="";n.image&&(o+=`
      <div class="pinterest-preview-image-container w-full aspect-square bg-gray-100 overflow-hidden">
        <img src="${n.image}" alt="${n.title||"Pinterest"}" class="w-full h-full object-cover">
      </div>
    `),o+=`
    <div class="flex items-center p-3 ${n.image?"border-t border-gray-200":"bg-red-50 border-b border-gray-200"}">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-red-600 flex-shrink-0">
        <path fill="currentColor" d="M12 0a12 12 0 0 0-4.37 23.17c-.1-.94-.2-2.4.04-3.44.2-.84 1.3-5.34 1.3-5.34s-.33-.67-.33-1.66c0-1.56.9-2.73 2.02-2.73.96 0 1.42.72 1.42 1.58 0 .96-.61 2.4-.93 3.74-.26 1.1.56 2.01 1.65 2.01 1.97 0 3.5-2.08 3.5-5.09 0-2.66-1.9-4.52-4.62-4.52-3.16 0-5.01 2.36-5.01 4.8 0 .95.37 1.96.82 2.52.1.11.1.2.08.31-.1.37-.3 1.16-.34 1.32-.05.21-.18.26-.4.16-1.5-.7-2.42-2.89-2.42-4.65 0-3.77 2.74-7.25 7.9-7.25 4.14 0 7.36 2.95 7.36 6.9 0 4.11-2.59 7.43-6.18 7.43-1.21 0-2.35-.63-2.74-1.37l-.74 2.84c-.27 1.04-1 2.35-1.49 3.14A12 12 0 1 0 12 0z"/>
      </svg>
      <span class="font-semibold text-gray-800 text-sm">${n.siteName||"Pinterest"}</span>
    </div>
  `,o+=`
    <div class="p-4">
      <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">${n.title||(i?"Pinterest Pin":"Pinterest Board")}</h3>
      <p class="text-sm text-gray-600 mb-2 line-clamp-2">${n.description||"View this content on Pinterest"}</p>
      <p class="text-xs text-gray-500 truncate">${e}</p>
    </div>
  `,o+=`
    <a href="${e}" target="_blank" rel="noopener noreferrer" 
       class="block w-full py-2 px-4 bg-red-600 hover:bg-red-700 text-white text-center text-sm font-medium transition-colors">
      Open in Pinterest
    </a>
  `,s.innerHTML=o,t.appendChild(s)}function N(e,t,n=null){e.innerHTML="";const i=document.createElement("div");if(i.className="p-4 bg-red-50 text-red-700 text-center",n){const s=document.createElement("a");s.href=n,s.target="_blank",s.rel="noopener noreferrer",s.className="underline hover:text-red-800",s.textContent=t+" - Open original",i.appendChild(s)}else i.textContent=t;e.appendChild(i)}function me(e,t){const n=document.createElement("div");n.className="bg-gray-100 animate-pulse p-4 h-32 flex items-center justify-center",n.innerHTML='<p class="text-gray-500">Loading LinkedIn content...</p>',t.appendChild(n),_(e).then(i=>{const s=document.createElement("div");s.className="linkedin-preview bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm";let o="";i.image&&(o+=`
        <div class="linkedin-preview-image-container w-full aspect-video bg-gray-100 overflow-hidden">
          <img src="${i.image}" alt="${i.title}" class="w-full h-full object-cover">
        </div>
      `),o+=`
      <div class="linkedin-preview-content p-4">
        <div class="flex items-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-blue-700 flex-shrink-0">
            <path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path>
          </svg>
          <span class="font-semibold text-gray-800 text-sm">${i.siteName}</span>
        </div>
        <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">${i.title}</h3>
        
        <!-- We're not showing any captions for LinkedIn posts to avoid mock content -->
        <!-- If we want to show captions in the future, we'll need to extract them from the actual LinkedIn posts -->
        
        <p class="text-sm text-gray-600 mb-2 line-clamp-2">${i.description}</p>
        <p class="text-xs text-gray-500 truncate">${e}</p>
      </div>
    `,o+=`
      <a href="${e}" target="_blank" rel="noopener noreferrer" 
         class="block w-full py-2 px-4 bg-blue-700 hover:bg-blue-800 text-white text-center text-sm font-medium transition-colors">
        Open in LinkedIn
      </a>
    `,s.innerHTML=o,n.remove(),t.appendChild(s)}).catch(i=>{console.error("Error fetching LinkedIn metadata:",i);const s=document.createElement("div");s.className="linkedin-preview bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",s.innerHTML=`
      <div class="linkedin-preview-content p-4">
        <div class="flex items-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-blue-700 flex-shrink-0">
            <path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path>
          </svg>
          <span class="font-semibold text-gray-800 text-sm">LinkedIn</span>
        </div>
        <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">LinkedIn Content</h3>
        <p class="text-sm text-gray-600 mb-2">View this content on LinkedIn, the world's largest professional network.</p>
        <p class="text-xs text-gray-500 truncate">${e}</p>
      </div>
      <a href="${e}" target="_blank" rel="noopener noreferrer" 
         class="block w-full py-2 px-4 bg-blue-700 hover:bg-blue-800 text-white text-center text-sm font-medium transition-colors">
        Open in LinkedIn
      </a>
    `,n.remove(),t.appendChild(s)})}function pe(e,t){const n=ue(e);if(!n){ge(t,"Invalid TikTok URL",e);return}const i=document.createElement("div");i.className="tiktok-embed-container",i.innerHTML=`
    <blockquote class="tiktok-embed" cite="${e}" 
      data-video-id="${n}" 
      style="max-width: 605px; min-width: 325px;">
      <section>
        <a target="_blank" href="https://www.tiktok.com/@tiktok">@tiktok</a>
      </section>
    </blockquote>
  `,t.appendChild(i),fe()}function ue(e){let t=/tiktok\.com\/@[\w.-]+\/video\/(\d+)/i,n=e.match(t);return n?n[1]:(t=/vm\.tiktok\.com\/[\w]+\/?/i,n=e.match(t),n?"shorturl":"")}function ge(e,t,n){e.innerHTML=`
    <div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-4">
      <p class="font-medium">${t}</p>
      <p class="text-sm mt-2 break-all">${n}</p>
    </div>
  `}function fe(){if(window.tiktokEmbedsLoaded){window.tiktokProcessEmbed&&window.tiktokProcessEmbed();return}if(!document.querySelector('script[src*="//www.tiktok.com/embed.js"]')){const e=document.createElement("script");e.src="https://www.tiktok.com/embed.js",e.async=!0,e.defer=!0,document.body.appendChild(e),window.tiktokEmbedsLoaded=!0,e.onload=()=>{window.tiktokProcessEmbed=()=>{console.log("TikTok embed script loaded")},window.tiktokProcessEmbed()}}}function he(e,t){const n=document.createElement("div");n.className="bg-gray-100 animate-pulse p-4 h-32 flex items-center justify-center",n.innerHTML='<p class="text-gray-500">Loading website data...</p>',t.appendChild(n);const i=document.createElement("div");i.className="website-preview rounded-lg overflow-hidden border border-gray-200",we(e).then(s=>{n&&n.parentNode&&n.remove();const o=s.image&&s.image.trim()!=="";let r=`
        <div class="website-preview-content">
      `;o&&(r+=`
          <div class="website-preview-image">
            <img src="${s.image}" alt="${s.title||"Website preview"}" class="w-full h-auto object-cover" onerror="this.style.display='none'">
          </div>
        `),r+=`
          <div class="website-preview-text p-4">
            <h3 class="text-lg font-semibold mb-2 line-clamp-2">${s.title||"Website"}</h3>
            ${s.description?`<p class="text-sm text-gray-600 mb-2 line-clamp-3">${s.description}</p>`:""}
            <div class="text-xs text-gray-500 flex items-center">
              ${s.favicon?`<img src="${s.favicon}" class="w-4 h-4 mr-1" onerror="this.style.display='none'">`:""}
              <span>${new URL(e).hostname}</span>
            </div>
          </div>
        </div>
        <a href="${e}" target="_blank" rel="noopener noreferrer" class="block w-full text-center text-sm text-blue-600 hover:text-blue-800 py-2 border-t border-gray-200">
          Visit Website
        </a>
      `,i.innerHTML=r,t.appendChild(i)}).catch(s=>{console.error("Error fetching Open Graph data:",s),ve(t,"Could not load website preview",e)})}async function we(e){try{const t=`https://api.allorigins.win/get?url=${encodeURIComponent(e)}`,i=await(await fetch(t)).json();if(!i.contents)throw new Error("No content returned from proxy");const o=new DOMParser().parseFromString(i.contents,"text/html");return{title:E(o,"og:title")||E(o,"twitter:title")||o.title,description:E(o,"og:description")||E(o,"twitter:description")||E(o,"description"),image:E(o,"og:image")||E(o,"twitter:image"),favicon:be(o,e)}}catch(t){return console.error("Error fetching Open Graph data:",t),{title:new URL(e).hostname,description:"",image:"",favicon:`https://www.google.com/s2/favicons?domain=${e}`}}}function E(e,t){const n=e.querySelector(`meta[property="${t}"], meta[name="${t}"]`);return n?n.getAttribute("content"):""}function be(e,t){const n=e.querySelector('link[rel="icon"], link[rel="shortcut icon"]');if(n){const i=n.getAttribute("href");if(i){if(i.startsWith("/")){const s=new URL(t);return`${s.protocol}//${s.host}${i}`}return i}}return`https://www.google.com/s2/favicons?domain=${t}`}function ve(e,t,n){e.innerHTML=`
    <div class="bg-red-50 border border-red-200 text-red-800 rounded-lg p-4">
      <p class="font-medium">${t}</p>
      <p class="text-sm mt-2 break-all">${n}</p>
    </div>
  `}function ye(e,t){const n=document.createElement("div");n.className="bg-gray-100 animate-pulse p-4 h-48 flex items-center justify-center",n.innerHTML='<p class="text-gray-500">Loading tweet...</p>',t.appendChild(n);const i=Te(e);if(!i){U(t,"Invalid Twitter URL",e);return}const s=document.createElement("div");s.className="twitter-embed-container",t.appendChild(s);const o=()=>{window.twttr&&window.twttr.widgets?window.twttr.widgets.createTweet(i,s,{theme:"light",dnt:!0,align:"center"}).then(r=>{n.remove()}).catch(r=>{console.error("Error creating Twitter embed:",r),U(t,"Could not load tweet",e)}):setTimeout(o,1e3)};o()}function Ee(e,t){const n=Pe(e);if(!n){U(t,"Invalid YouTube URL");return}const i=document.createElement("div");i.className="bg-gray-100 animate-pulse p-4 h-48 flex items-center justify-center",i.innerHTML='<p class="text-gray-500">Loading YouTube video...</p>',t.appendChild(i);const s=document.createElement("div");s.className="youtube-embed-container";const o=document.createElement("iframe");o.src=`https://www.youtube.com/embed/${n}?origin=${encodeURIComponent(window.location.origin)}&enablejsapi=1`,o.title="YouTube video player",o.setAttribute("frameborder","0"),o.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),o.setAttribute("allowfullscreen",""),o.setAttribute("loading","lazy"),o.setAttribute("referrerpolicy","strict-origin-when-cross-origin"),o.addEventListener("load",()=>{i&&i.parentNode&&i.remove()}),s.appendChild(o),t.appendChild(s)}function ke(e,t){return X(e,t)}function xe(e,t){return se(e,t)}function Le(e,t){return me(e,t)}function Ie(e,t){pe(e,t)}function Ce(e,t){return he(e,t)}function U(e,t,n=null){e.innerHTML="";const i=document.createElement("div");if(i.className="p-4 bg-red-50 text-red-700 text-center",n){const s=document.createElement("a");s.href=n,s.target="_blank",s.rel="noopener noreferrer",s.className="underline hover:text-red-800",s.textContent=t+" - Open original",i.appendChild(s)}else i.textContent=t;e.appendChild(i)}function Te(e){const t=/(?:twitter|x)\.com\/(?:#!\/)?(?:\w+)\/status(?:es)?\/(\d+)/i,n=e.match(t);if(n&&n[1])return n[1];const i=/(?:twitter|x)\.com\/(?:i\/web|intent)\/status\/(\d+)/i,s=e.match(i);return s?s[1]:""}function Pe(e){const t=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,n=e.match(t);return n?n[1]:""}function V(e,t=!1,n=!1){const i=document.createElement("span");i.className="tag",i.dataset.tag=e,t&&(i.classList.add("cursor-pointer","hover:bg-blue-200"),i.addEventListener("click",o=>{if(o.target.tagName==="BUTTON")return;const r=i.dataset.tag;if(document.getElementById("tagFilterContainer")){const m=new CustomEvent("addTagFilter",{detail:{tag:r}});document.dispatchEvent(m)}else{const m=document.getElementById("tagFilter");if(m){let d=!1;for(let c=0;c<m.options.length;c++)if(m.options[c].value===r){d=!0;break}if(!d){const c=document.createElement("option");c.value=r,c.textContent=r,m.appendChild(c)}m.value=r,m.dispatchEvent(new Event("change"))}}}));const s=document.createElement("span");if(s.textContent=e,i.appendChild(s),n){const o=document.createElement("button");o.className="ml-1 text-blue-800 hover:text-red-500 focus:outline-none",o.innerHTML="&times;",o.setAttribute("aria-label",`Remove ${e} tag`),o.addEventListener("click",r=>{r.stopPropagation(),r.preventDefault();const m=new CustomEvent("tagDelete",{bubbles:!0,cancelable:!0,detail:{tag:e}});i.dispatchEvent(m)}),i.appendChild(o)}return i}function Be(e,t,n=null){if(t.innerHTML="",!e||e.length===0){const i=document.createElement("span");i.className="text-gray-400 text-sm italic",i.textContent="No tags",t.appendChild(i);return}e.forEach(i=>{const s=V(i,!0,!!n);n&&s.addEventListener("tagDelete",o=>{n(o.detail.tag)}),t.appendChild(s)})}function M(e,t,n){if(t.innerHTML="",!e||e.length===0)return;const i=document.createElement("p");i.className="text-sm text-gray-500 mb-2",i.textContent="Suggested tags:",t.appendChild(i);const s=document.createElement("div");s.className="flex flex-wrap gap-1",e.forEach(o=>{const r=V(o,!1,!1);r.classList.add("cursor-pointer","hover:bg-blue-200"),r.addEventListener("click",()=>{n(o)}),s.appendChild(r)}),t.appendChild(s)}function y(e){const t=new Set;return e.forEach(n=>{n.tags&&Array.isArray(n.tags)&&n.tags.forEach(i=>{t.add(i)})}),Array.from(t).sort()}const x="boardie_posts";function k(){try{const e=localStorage.getItem(x),t=e?JSON.parse(e):[];return L(t),B(y(t)),t}catch(e){return console.error("Error loading posts:",e),e instanceof SyntaxError&&(console.log("Attempting to recover from corrupted storage"),localStorage.removeItem(x)),[]}}function S(e){try{localStorage.setItem(x,JSON.stringify(e))}catch(t){console.error("Error saving posts:",t)}}function Se(e,t=[]){let n=[];try{const o=localStorage.getItem(x);n=o?JSON.parse(o):[]}catch(o){console.error("Error loading existing posts:",o),n=[]}const i=W(e),s={id:Q(),url:e,platform:i,tags:t,dateAdded:new Date().toISOString()};n.push(s),S(n),L(n),B(y(n)),document.getElementById("noPostsMessage").classList.add("hidden")}function $e(e){const n=k().filter(i=>i.id!==e);S(n),L(n)}function Ne(e){let t=[];try{const n=localStorage.getItem(x);t=n?JSON.parse(n):[]}catch(n){return console.error("Error loading post by ID:",n),null}return t.find(n=>n.id===e)||null}function Me(e,t,n){let i=[];try{const o=localStorage.getItem(x);i=o?JSON.parse(o):[]}catch(o){console.error("Error loading posts for update:",o);return}const s=i.findIndex(o=>o.id===e);if(s!==-1){const o=W(t);i[s]={...i[s],url:t,platform:o,tags:n,updatedAt:new Date().toISOString()},S(i),L(i),B(y(i))}}function L(e){const t=document.getElementById("postsGrid"),n=document.getElementById("postTemplate");t.innerHTML="";const i=[...e].sort((o,r)=>new Date(r.dateAdded)-new Date(o.dateAdded)),s=i.map(o=>{const r=document.importNode(n.content,!0).firstElementChild;r.dataset.id=o.id,r.dataset.platform=o.platform,r.dataset.url=o.url,r.classList.add("opacity-0");const m=r.querySelector(".post-embed"),d=o.platform==="twitter"?"500px":o.platform==="instagram"?"600px":"300px";m.innerHTML=`
      <div class="embed-placeholder bg-gray-100 animate-pulse flex items-center justify-center" 
           style="height: ${d}">
        <p class="text-gray-500">Loading ${o.platform} post...</p>
      </div>
    `;const c=r.querySelector(".post-tags");return Be(o.tags,c,l=>{Ue(o.id,l)}),{element:r,post:o}});s.forEach(({element:o})=>{t.appendChild(o)}),s.forEach(({element:o,post:r},m)=>{setTimeout(()=>{const d=o.querySelector(".post-embed");Ae(r.url,r.platform,d);const c=()=>{const l=d.querySelector(".embed-placeholder");l&&l.remove(),o.classList.remove("opacity-0"),o.classList.add("opacity-100")};setTimeout(()=>{const l=d.querySelectorAll("iframe"),h=d.querySelectorAll("img");l.length===0&&h.length===0?c():(l.forEach(w=>{var T;w.complete||((T=w.contentDocument)==null?void 0:T.readyState)==="complete"?c():w.addEventListener("load",c,{once:!0})}),h.forEach(w=>{w.complete?c():w.addEventListener("load",c,{once:!0})}),setTimeout(c,3e3))},100)},m*100)}),i.length===0?J():document.getElementById("noPostsMessage").classList.add("hidden")}function Ae(e,t,n){switch(t.toLowerCase()){case"twitter":case"x":ye(e,n);break;case"youtube":Ee(e,n);break;case"instagram":ke(e,n);break;case"pinterest":xe(e,n);break;case"linkedin":Le(e,n);break;case"tiktok":Ie(e,n);break;default:Ce(e,n)}}function D(){const e=[];return document.getElementById("tagFilterContainer").querySelectorAll(".tag").forEach(i=>{e.push(i.dataset.tag)}),e}function A(e=[]){let t=[];try{const i=localStorage.getItem(x);t=i?JSON.parse(i):[]}catch(i){console.error("Error loading posts for filtering:",i),t=[]}const n=document.getElementById("clearTagFilters");if(e.length>0?n.classList.remove("hidden"):n.classList.add("hidden"),e.length===0)L(t);else{const i=t.filter(s=>s.tags?e.every(o=>s.tags.includes(o)):!1);L(i)}}function Ue(e,t){const n=k(),i=n.findIndex(s=>s.id===e);i!==-1&&(n[i].tags=n[i].tags.filter(s=>s!==t),S(n),L(n),B(y(n)))}function J(){document.getElementById("noPostsMessage").classList.remove("hidden")}const F="boardie_posts";function Fe(){try{const e=localStorage.getItem(F),t=e?JSON.parse(e):[];if(!t||t.length===0){alert("No posts to export");return}const n={version:"0.1.0",timestamp:new Date().toISOString(),count:t.length,posts:t},i=JSON.stringify(n,null,2),s=new Blob([i],{type:"application/json"}),o=URL.createObjectURL(s),r=document.createElement("a");return r.href=o,r.download=`boardie-export-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o),!0}catch(e){return console.error("Error exporting posts:",e),alert("Failed to export posts: "+e.message),!1}}function Oe(e){return new Promise((t,n)=>{const i=new FileReader;i.onload=s=>{try{const o=JSON.parse(s.target.result);if(!o.posts||!Array.isArray(o.posts)){n(new Error("Invalid import file format"));return}const r=JSON.parse(localStorage.getItem(F)||"[]"),m=new Set(r.map(l=>l.id)),d=o.posts.filter(l=>!m.has(l.id)),c=[...r,...d];localStorage.setItem(F,JSON.stringify(c)),t({success:!0,totalImported:o.posts.length,newPostsAdded:d.length,duplicatesSkipped:o.posts.length-d.length})}catch(o){console.error("Error importing posts:",o),n(o)}},i.onerror=s=>{n(s)},i.readAsText(e)})}function je(){const e=document.getElementById("addLinkBtn"),t=document.getElementById("addLinkModal"),n=document.getElementById("closeModalBtn"),i=document.getElementById("cancelAddLink"),s=document.getElementById("linkForm"),o=document.getElementById("editLinkModal"),r=document.getElementById("closeEditModalBtn"),m=document.getElementById("cancelEditLink"),d=document.getElementById("deletePostBtn"),c=document.getElementById("editLinkForm");document.getElementById("tagFilter");const l=document.getElementById("menuBtn"),h=document.getElementById("menuDropdown"),w=document.getElementById("exportBtn"),T=document.getElementById("importFile"),O=document.getElementById("emptyStateAddBtn");e.addEventListener("click",()=>{t.classList.remove("hidden"),document.body.classList.add("overflow-hidden"),document.getElementById("linkUrl").focus();const a=k(),p=y(a),g=document.getElementById("tagSuggestions");M(p,g,f=>{const u=document.getElementById("linkTags"),b=C(u.value);if(!b.includes(f)){const v=b.length>0?", ":"";u.value+=v+f}})}),n.addEventListener("click",()=>{P()}),t.addEventListener("click",a=>{a.target===t&&P()}),i.addEventListener("click",()=>{P()});function P(){t.classList.add("hidden"),document.body.classList.remove("overflow-hidden"),s.reset(),document.getElementById("tagSuggestions").innerHTML=""}function I(){o.classList.add("hidden"),document.body.classList.remove("overflow-hidden"),c.reset(),document.getElementById("editTagSuggestions").innerHTML=""}function G(){const a=k(),p=y(a),g=document.getElementById("availableTagsContainer");g.innerHTML="",p.forEach(f=>{const u=document.createElement("span");u.className="tag cursor-pointer hover:bg-blue-200",u.dataset.tag=f,u.textContent=f,u.addEventListener("click",()=>{j(f)}),g.appendChild(u)})}function j(a){const p=document.getElementById("tagFilterContainer"),g=document.getElementById("availableTagsContainer");if(p.querySelector(`.tag[data-tag="${a}"]`))return;const u=document.createElement("span");u.className="tag bg-blue-100 text-blue-800 cursor-pointer",u.dataset.tag=a,u.textContent=a,u.addEventListener("click",()=>{z(a)}),p.appendChild(u);const b=g.querySelector(`.tag[data-tag="${a}"]`);b&&b.classList.add("hidden");const v=D();A(v)}function z(a){const p=document.getElementById("tagFilterContainer"),g=document.getElementById("availableTagsContainer"),f=p.querySelector(`.tag[data-tag="${a}"]`);f&&f.remove();const u=g.querySelector(`.tag[data-tag="${a}"]`);u&&u.classList.remove("hidden");const b=D();A(b)}function Y(){const a=document.getElementById("tagFilterContainer"),p=document.getElementById("availableTagsContainer");a.innerHTML="",p.querySelectorAll(".tag").forEach(f=>{f.classList.remove("hidden")}),A([])}s.addEventListener("submit",a=>{a.preventDefault();const p=document.getElementById("linkUrl").value.trim(),g=document.getElementById("linkTags").value.trim(),f=C(g);p&&(Se(p,f),P())}),G(),document.getElementById("clearTagFilters").addEventListener("click",()=>{Y()}),document.addEventListener("addTagFilter",a=>{a.detail&&a.detail.tag&&j(a.detail.tag)}),document.getElementById("postsGrid").addEventListener("click",a=>{if(a.target.closest(".edit-post")){const p=a.target.closest(".post-card");p&&p.dataset.id&&K(p.dataset.id)}});function K(a){const p=Ne(a);if(!p)return;document.getElementById("editPostId").value=p.id,document.getElementById("editLinkUrl").value=p.url,document.getElementById("editLinkTags").value=p.tags.join(", "),document.getElementById("editLinkModal").classList.remove("hidden"),document.body.classList.add("overflow-hidden"),document.getElementById("editLinkUrl").focus();const f=k(),u=y(f),b=document.getElementById("editTagSuggestions");M(u,b,v=>{const H=document.getElementById("editLinkTags"),q=C(H.value);if(!q.includes(v)){const Z=q.length>0?", ":"";H.value+=Z+v}})}r.addEventListener("click",()=>{I()}),o.addEventListener("click",a=>{a.target===o&&I()}),m.addEventListener("click",()=>{I()}),d.addEventListener("click",()=>{const a=document.getElementById("editPostId").value;a&&confirm("Are you sure you want to delete this post?")&&($e(a),I())}),c.addEventListener("submit",a=>{a.preventDefault();const p=document.getElementById("editPostId").value,g=document.getElementById("editLinkUrl").value.trim(),f=document.getElementById("editLinkTags").value.trim(),u=C(f);p&&g&&(Me(p,g,u),I())}),l.addEventListener("click",()=>{h.classList.toggle("hidden")}),document.addEventListener("click",a=>{!l.contains(a.target)&&!h.contains(a.target)&&h.classList.add("hidden")}),w.addEventListener("click",()=>{h.classList.add("hidden"),Fe()}),T.addEventListener("change",a=>{if(a.target.files.length>0){const p=a.target.files[0];Oe(p).then(g=>{alert(`Import successful! Added ${g.newPostsAdded} new posts. Skipped ${g.duplicatesSkipped} duplicates.`),window.location.reload()}).catch(g=>{alert("Import failed: "+g.message)}).finally(()=>{a.target.value=""})}}),O&&O.addEventListener("click",()=>{t.classList.remove("hidden"),document.body.classList.add("overflow-hidden"),document.getElementById("linkUrl").focus();const a=k(),p=y(a),g=document.getElementById("tagSuggestions");M(p,g,f=>{const u=document.getElementById("linkTags"),b=C(u.value);if(!b.includes(f)){const v=b.length>0?", ":"";u.value+=v+f}})})}function He(){if(window.twttr){console.log("Twitter widgets already loaded");return}window.twttr=function(e,t,n){var i,s=e.getElementsByTagName(t)[0],o=window.twttr||{};return e.getElementById(n)||(i=e.createElement(t),i.id=n,i.src="https://platform.twitter.com/widgets.js",s.parentNode.insertBefore(i,s),o._e=[],o.ready=function(r){o._e.push(r)}),o}(document,"script","twitter-wjs"),window.twttr.ready(function(){console.log("Twitter widgets loaded and ready")})}document.addEventListener("DOMContentLoaded",()=>{console.log("Boardie application initialized"),He(),je(),k().length===0&&J()});
