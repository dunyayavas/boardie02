(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function M(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function $(e){const n=e.toLowerCase();return n.includes("twitter.com")||n.includes("x.com")?"Twitter":n.includes("youtube.com")||n.includes("youtu.be")?"YouTube":n.includes("instagram.com")?"Instagram":n.includes("linkedin.com")?"LinkedIn":n.includes("pinterest.com")?"Pinterest":"Website"}function E(e){return e?e.split(",").map(n=>n.trim()).filter(n=>n.length>0):[]}function y(e){const n=document.getElementById("tagFilter");if(!n)return;const t=n.value;for(;n.options.length>1;)n.remove(1);if(e&&e.length>0){const r=[...e].sort();r.forEach(s=>{if(s&&s.trim()){const o=document.createElement("option");o.value=s,o.textContent=s,n.appendChild(o)}}),r.includes(t)&&(n.value=t)}}function U(e,n){const t=document.createElement("div");t.className="bg-gray-100 animate-pulse p-4 h-64 flex items-center justify-center",t.innerHTML='<p class="text-gray-500">Loading Instagram post...</p>',n.appendChild(t);const r=O(e);if(!r){j(n,"Invalid Instagram URL",e);return}const s=document.createElement("div");s.className="instagram-embed-container",s.innerHTML=`
    <blockquote 
      class="instagram-media" 
      data-instgrm-captioned 
      data-instgrm-permalink="https://www.instagram.com/p/${r}/" 
      data-instgrm-version="14">
      <a href="https://www.instagram.com/p/${r}/">View this post on Instagram</a>
    </blockquote>
  `,n.appendChild(s),H(),setTimeout(()=>{t&&t.parentNode&&t.remove()},5e3)}function O(e){const n=/instagram\.com\/(?:p|reel)\/([A-Za-z0-9_-]+)/i,t=e.match(n);return t?t[1]:""}function j(e,n,t=null){e.innerHTML="";const r=document.createElement("div");if(r.className="p-4 bg-red-50 text-red-700 text-center",t){const s=document.createElement("a");s.href=t,s.target="_blank",s.rel="noopener noreferrer",s.className="underline hover:text-red-800",s.textContent=n+" - Open original",r.appendChild(s)}else r.textContent=n;e.appendChild(r)}function H(){if(window.instgrm){window.instgrm.Embeds&&window.instgrm.Embeds.process&&window.instgrm.Embeds.process();return}if(!document.querySelector('script[src*="//www.instagram.com/embed.js"]')){const e=document.createElement("script");e.src="//www.instagram.com/embed.js",e.async=!0,e.defer=!0,document.body.appendChild(e),e.onload=()=>{window.instgrm&&window.instgrm.Embeds&&window.instgrm.Embeds.process&&window.instgrm.Embeds.process()}}}const R="https://link-preview-worker.dunyayavas.workers.dev";async function B(e){try{if(e.includes("linkedin.com")||e.includes("pinterest.com")){const n=`${R}?url=${encodeURIComponent(e)}`,t=await fetch(n);if(!t.ok)throw new Error(`Failed to fetch metadata: ${t.status}`);const r=await t.json();return!r.title||r.error?(console.warn("Falling back to generated metadata due to worker error:",r.error||"Missing title"),N(e)):(delete r.caption,r.realCaption=null,r)}else return{title:"Web Page",description:"No metadata available for this URL",image:null,url:e,siteName:new URL(e).hostname}}catch(n){return console.error("Error fetching metadata:",n),e.includes("linkedin.com")?N(e):e.includes("pinterest.com")?{title:"Pinterest",description:"View this content on Pinterest",image:"https://s.pinimg.com/webapp/favicon-56d11a4a.png",url:e,siteName:"Pinterest",realCaption:null}:{title:"Web Page",description:"Error fetching metadata",image:null,url:e,siteName:new URL(e).hostname}}}function N(e){const n=e.toLowerCase(),t={url:e,siteName:"LinkedIn"};let r="unknown";if(n.includes("/posts/")?r="post":n.includes("/pulse/")?r="article":n.includes("/in/")?r="profile":n.includes("/company/")&&(r="company"),t.image="https://cdn-icons-png.flaticon.com/512/174/174857.png",t.caption=q(r),t.realCaption=null,r==="profile"){const s=/linkedin\.com\/in\/([^\/\?#]+)/i,o=e.match(s);if(o&&o[1]){const i=o[1].replace(/-/g," ");t.title=`${i} | LinkedIn`,t.description=`View ${i}'s profile on LinkedIn, the world's largest professional community.`,t.image="https://cdn-icons-png.flaticon.com/512/3135/3135715.png"}}else if(r==="company"){const s=/linkedin\.com\/company\/([^\/\?#]+)/i,o=e.match(s);if(o&&o[1]){const i=o[1].replace(/-/g," ");t.title=`${i} | LinkedIn`,t.description=`Learn about ${i}, including available jobs, company insights, and more.`,t.image="https://cdn-icons-png.flaticon.com/512/2910/2910791.png"}}else if(r==="post"){const s=/linkedin\.com\/posts\/([^\/\?#]+)/i,o=e.match(s);if(o&&o[1]){const i=o[1].replace(/-/g," ");t.title=`LinkedIn Post by ${i}`,t.description=`Check out this post on LinkedIn by ${i}.`,t.image="https://cdn-icons-png.flaticon.com/512/5968/5968884.png"}}else if(r==="article"){const s=/linkedin\.com\/pulse\/([^\/\?#]+)(?:-([^\/\?#]+))?/i,o=e.match(s);if(o){const i=o[1]?o[1].replace(/-/g," "):"Article",m=o[2]?o[2].replace(/-/g," "):"";t.title=i.charAt(0).toUpperCase()+i.slice(1),t.description=m?`Article by ${m} on LinkedIn`:"Read this article on LinkedIn",t.image="https://cdn-icons-png.flaticon.com/512/2258/2258853.png"}}else t.title="LinkedIn",t.description="View this content on LinkedIn, the world's largest professional network.";return t}function q(e){const n={profile:"I am excited to share that I have joined a new company as a Senior Developer. Looking forward to this new journey! #NewBeginnings #CareerGrowth",company:"We are thrilled to announce our latest product launch! After months of hard work, our team has created something truly innovative. Check out the link to learn more. #ProductLaunch #Innovation",post:"Just finished an amazing project with my team. It is incredible what we can achieve when we collaborate effectively. #Teamwork #ProjectSuccess",article:"In my latest article, I discuss the future of remote work and how companies can adapt to this new normal. Read more to discover key strategies for success. #RemoteWork #FutureOfWork",unknown:"Sharing some thoughts on LinkedIn about professional development and career growth. What strategies have worked for you? #ProfessionalDevelopment"};return n[e]||n.unknown}function F(e,n){const t=document.createElement("div");t.className="bg-gray-100 animate-pulse p-4 h-64 flex items-center justify-center",t.innerHTML='<p class="text-gray-500">Loading Pinterest content...</p>',n.appendChild(t);const r=e.includes("/pin/"),s=e.includes("/board/")||/pinterest\.com\/([^\/]+)\/([^\/]+)\/?$/.test(e)&&!e.includes("/pin/");if(!r&&!s){L(n,"Invalid Pinterest URL",e);return}let o="",i={username:"",boardName:""};if(r){if(o=W(e),!o){L(n,"Invalid Pinterest pin URL",e);return}}else if(s&&(i=_(e),!i.username||!i.boardName)){L(n,"Invalid Pinterest board URL",e);return}n.querySelectorAll(".pinterest-official-embed, .pinterest-fallback-container").forEach(a=>a.remove());const c=document.createElement("div");if(c.className="pinterest-official-embed",c.style.display="block",r){const a=document.createElement("a");a.href=e,a.setAttribute("data-pin-do","embedPin"),a.setAttribute("data-pin-width","medium"),c.appendChild(a)}else if(s){const a=document.createElement("a");a.href=e,a.setAttribute("data-pin-do","embedBoard"),a.setAttribute("data-pin-board-width","100%"),a.setAttribute("data-pin-scale-height","400"),a.setAttribute("data-pin-scale-width","60"),a.setAttribute("data-pin-columns","1"),c.appendChild(a)}n.appendChild(c);const l=document.createElement("div");l.className="pinterest-fallback-container",l.style.display="none",n.appendChild(l),V(),setTimeout(()=>{c.querySelector("iframe, span[data-pin-href]")?(l.style.display="none",c.style.display="block"):(console.log("Pinterest official embed failed to load, using fallback"),c.style.display="none",l.style.display="block",B(e).then(d=>{J(e,l,d,r)}).catch(d=>{console.error("Error fetching Pinterest metadata:",d),D(e,l,r,o,i)}))},3e3),t&&t.parentNode&&t.remove()}function D(e,n,t,r,s){const o=document.createElement("div");o.className="pinterest-preview-card bg-white border border-gray-200 rounded-lg overflow-hidden";const i=document.createElement("div");i.className="flex items-center p-3 bg-red-50 border-b border-gray-200",i.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-6 h-6 mr-2 text-red-600">
      <path fill="currentColor" d="M12 0a12 12 0 0 0-4.37 23.17c-.1-.94-.2-2.4.04-3.44.2-.84 1.3-5.34 1.3-5.34s-.33-.67-.33-1.66c0-1.56.9-2.73 2.02-2.73.96 0 1.42.72 1.42 1.58 0 .96-.61 2.4-.93 3.74-.26 1.1.56 2.01 1.65 2.01 1.97 0 3.5-2.08 3.5-5.09 0-2.66-1.9-4.52-4.62-4.52-3.16 0-5.01 2.36-5.01 4.8 0 .95.37 1.96.82 2.52.1.11.1.2.08.31-.1.37-.3 1.16-.34 1.32-.05.21-.18.26-.4.16-1.5-.7-2.42-2.89-2.42-4.65 0-3.77 2.74-7.25 7.9-7.25 4.14 0 7.36 2.95 7.36 6.9 0 4.11-2.59 7.43-6.18 7.43-1.21 0-2.35-.63-2.74-1.37l-.74 2.84c-.27 1.04-1 2.35-1.49 3.14A12 12 0 1 0 12 0z"/>
    </svg>
    <span class="font-semibold text-gray-800">${t?"Pinterest Pin":"Pinterest Board"}</span>
  `;const m=document.createElement("div");m.className="w-full aspect-square bg-gray-100 flex items-center justify-center",m.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
    </svg>
  `;const c=document.createElement("div");c.className="p-4";const l=document.createElement("p");if(l.className="text-sm text-gray-600 mb-4",t)if(l.textContent="View this Pinterest pin to discover creative ideas and inspiration.",r){const p=document.createElement("p");p.className="text-xs text-gray-500 mt-2",p.textContent=`Pin ID: ${r}`,c.appendChild(l),c.appendChild(p)}else c.appendChild(l);else if(l.textContent="Explore this Pinterest board to discover a collection of related pins and ideas.",c.appendChild(l),s.username&&s.boardName){const p=document.createElement("p");p.className="text-xs text-gray-500 mt-2",p.textContent=`Board by ${s.username}: ${s.boardName.replace(/-/g," ")}`,c.appendChild(p)}const a=document.createElement("div");a.className="mt-2 text-xs text-gray-500 truncate",a.textContent=e,c.appendChild(a);const d=document.createElement("a");d.href=e,d.target="_blank",d.rel="noopener noreferrer",d.className="block w-full py-2 px-4 bg-red-600 hover:bg-red-700 text-white text-center rounded-b-lg transition-colors mt-4",d.textContent=t?"View Pin on Pinterest":"View Board on Pinterest",c.appendChild(d),o.appendChild(i),o.appendChild(m),o.appendChild(c),n.appendChild(o)}function W(e){const n=/pinterest\.com\/pin\/([0-9]+)/i,t=e.match(n);return t?t[1]:""}function _(e){let n="",t="";const r=/pinterest\.com\/([^\/]+)\/board\/([^\/]+)/i,s=e.match(r);if(s)n=s[1],t=s[2];else{const o=/pinterest\.com\/([^\/]+)\/([^\/]+)\/?$/i,i=e.match(o);i&&!e.includes("/pin/")&&(n=i[1],t=i[2])}return{username:n,boardName:t}}function V(){if(window.PinUtils&&window.PinUtils.build){console.log("Pinterest widgets already loaded"),window.PinUtils.build(),setTimeout(k,500);return}if(document.getElementById("pinterest-widget-script")){console.log("Pinterest script is loading...");return}console.log("Loading Pinterest widget script");const e=document.createElement("script");e.id="pinterest-widget-script",e.async=!0,e.defer=!0,e.src="https://assets.pinterest.com/js/pinit.js",e.onload=function(){if(console.log("Pinterest widget script loaded"),window.PinUtils&&window.PinUtils.build){console.log("Building Pinterest widgets"),window.PinUtils.build(),setTimeout(k,500);let n=0;const t=setInterval(()=>{if(n>=10){clearInterval(t);return}window.PinUtils&&window.PinUtils.build&&(console.log("Rebuilding Pinterest widgets (delayed)"),window.PinUtils.build(),k()),n++},500)}},document.body.appendChild(e)}function k(){console.log("Adjusting Pinterest embeds to fit properly"),document.querySelectorAll(".pinterest-official-embed").forEach(n=>{n.style.textAlign="center",n.style.width="100%",n.style.maxWidth="100%",n.style.margin="0 auto",n.querySelectorAll("iframe").forEach(o=>{o.width<300&&(o.style.minWidth="300px"),o.style.maxWidth="100%"}),n.querySelectorAll('[data-pin-do="embedPin"]').forEach(o=>{o.style.margin="0 auto",o.style.display="block"}),n.querySelectorAll('[data-pin-do="embedBoard"]').forEach(o=>{o.style.width="100%",o.style.maxWidth="100%",o.hasAttribute("data-pin-columns")||o.setAttribute("data-pin-columns","1"),o.parentNode&&(o.parentNode.style.width="100%"),n.querySelectorAll(".pinterest-board-widget").forEach(m=>{m.style.maxWidth="100%",m.style.width="100%"})})})}function J(e,n,t,r){const s=document.createElement("div");s.className="pinterest-preview-card bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm";let o="";t.image&&(o+=`
      <div class="pinterest-preview-image-container w-full aspect-square bg-gray-100 overflow-hidden">
        <img src="${t.image}" alt="${t.title||"Pinterest"}" class="w-full h-full object-cover">
      </div>
    `),o+=`
    <div class="flex items-center p-3 ${t.image?"border-t border-gray-200":"bg-red-50 border-b border-gray-200"}">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-red-600 flex-shrink-0">
        <path fill="currentColor" d="M12 0a12 12 0 0 0-4.37 23.17c-.1-.94-.2-2.4.04-3.44.2-.84 1.3-5.34 1.3-5.34s-.33-.67-.33-1.66c0-1.56.9-2.73 2.02-2.73.96 0 1.42.72 1.42 1.58 0 .96-.61 2.4-.93 3.74-.26 1.1.56 2.01 1.65 2.01 1.97 0 3.5-2.08 3.5-5.09 0-2.66-1.9-4.52-4.62-4.52-3.16 0-5.01 2.36-5.01 4.8 0 .95.37 1.96.82 2.52.1.11.1.2.08.31-.1.37-.3 1.16-.34 1.32-.05.21-.18.26-.4.16-1.5-.7-2.42-2.89-2.42-4.65 0-3.77 2.74-7.25 7.9-7.25 4.14 0 7.36 2.95 7.36 6.9 0 4.11-2.59 7.43-6.18 7.43-1.21 0-2.35-.63-2.74-1.37l-.74 2.84c-.27 1.04-1 2.35-1.49 3.14A12 12 0 1 0 12 0z"/>
      </svg>
      <span class="font-semibold text-gray-800 text-sm">${t.siteName||"Pinterest"}</span>
    </div>
  `,o+=`
    <div class="p-4">
      <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">${t.title||(r?"Pinterest Pin":"Pinterest Board")}</h3>
      <p class="text-sm text-gray-600 mb-2 line-clamp-2">${t.description||"View this content on Pinterest"}</p>
      <p class="text-xs text-gray-500 truncate">${e}</p>
    </div>
  `,o+=`
    <a href="${e}" target="_blank" rel="noopener noreferrer" 
       class="block w-full py-2 px-4 bg-red-600 hover:bg-red-700 text-white text-center text-sm font-medium transition-colors">
      Open in Pinterest
    </a>
  `,s.innerHTML=o,n.appendChild(s)}function L(e,n,t=null){e.innerHTML="";const r=document.createElement("div");if(r.className="p-4 bg-red-50 text-red-700 text-center",t){const s=document.createElement("a");s.href=t,s.target="_blank",s.rel="noopener noreferrer",s.className="underline hover:text-red-800",s.textContent=n+" - Open original",r.appendChild(s)}else r.textContent=n;e.appendChild(r)}function z(e,n){const t=document.createElement("div");t.className="bg-gray-100 animate-pulse p-4 h-32 flex items-center justify-center",t.innerHTML='<p class="text-gray-500">Loading LinkedIn content...</p>',n.appendChild(t),B(e).then(r=>{const s=document.createElement("div");s.className="linkedin-preview bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm";let o="";r.image&&(o+=`
        <div class="linkedin-preview-image-container w-full aspect-video bg-gray-100 overflow-hidden">
          <img src="${r.image}" alt="${r.title}" class="w-full h-full object-cover">
        </div>
      `),o+=`
      <div class="linkedin-preview-content p-4">
        <div class="flex items-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-blue-700 flex-shrink-0">
            <path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path>
          </svg>
          <span class="font-semibold text-gray-800 text-sm">${r.siteName}</span>
        </div>
        <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">${r.title}</h3>
        
        <!-- We're not showing any captions for LinkedIn posts to avoid mock content -->
        <!-- If we want to show captions in the future, we'll need to extract them from the actual LinkedIn posts -->
        
        <p class="text-sm text-gray-600 mb-2 line-clamp-2">${r.description}</p>
        <p class="text-xs text-gray-500 truncate">${e}</p>
      </div>
    `,o+=`
      <a href="${e}" target="_blank" rel="noopener noreferrer" 
         class="block w-full py-2 px-4 bg-blue-700 hover:bg-blue-800 text-white text-center text-sm font-medium transition-colors">
        Open in LinkedIn
      </a>
    `,s.innerHTML=o,t.remove(),n.appendChild(s)}).catch(r=>{console.error("Error fetching LinkedIn metadata:",r);const s=document.createElement("div");s.className="linkedin-preview bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",s.innerHTML=`
      <div class="linkedin-preview-content p-4">
        <div class="flex items-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-5 h-5 mr-2 text-blue-700 flex-shrink-0">
            <path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path>
          </svg>
          <span class="font-semibold text-gray-800 text-sm">LinkedIn</span>
        </div>
        <h3 class="font-bold text-gray-900 mb-1 text-base leading-tight">LinkedIn Content</h3>
        <p class="text-sm text-gray-600 mb-2">View this content on LinkedIn, the world's largest professional network.</p>
        <p class="text-xs text-gray-500 truncate">${e}</p>
      </div>
      <a href="${e}" target="_blank" rel="noopener noreferrer" 
         class="block w-full py-2 px-4 bg-blue-700 hover:bg-blue-800 text-white text-center text-sm font-medium transition-colors">
        Open in LinkedIn
      </a>
    `,t.remove(),n.appendChild(s)})}function Y(e,n){const t=document.createElement("div");t.className="bg-gray-100 animate-pulse p-4 h-48 flex items-center justify-center",t.innerHTML='<p class="text-gray-500">Loading tweet...</p>',n.appendChild(t);const r=ee(e);if(!r){C(n,"Invalid Twitter URL",e);return}const s=document.createElement("div");s.className="twitter-embed-container",n.appendChild(s);const o=()=>{window.twttr&&window.twttr.widgets?window.twttr.widgets.createTweet(r,s,{theme:"light",dnt:!0,align:"center"}).then(i=>{t.remove()}).catch(i=>{console.error("Error creating Twitter embed:",i),C(n,"Could not load tweet",e)}):setTimeout(o,1e3)};o()}function G(e,n){const t=te(e);if(!t){C(n,"Invalid YouTube URL");return}const r=document.createElement("div");r.className="bg-gray-100 animate-pulse p-4 h-48 flex items-center justify-center",r.innerHTML='<p class="text-gray-500">Loading YouTube video...</p>',n.appendChild(r);const s=document.createElement("div");s.className="youtube-embed-container";const o=document.createElement("iframe");o.src=`https://www.youtube.com/embed/${t}?origin=${encodeURIComponent(window.location.origin)}&enablejsapi=1`,o.title="YouTube video player",o.setAttribute("frameborder","0"),o.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),o.setAttribute("allowfullscreen",""),o.setAttribute("loading","lazy"),o.setAttribute("referrerpolicy","strict-origin-when-cross-origin"),o.addEventListener("load",()=>{r&&r.parentNode&&r.remove()}),s.appendChild(o),n.appendChild(s)}function K(e,n){return U(e,n)}function Z(e,n){return F(e,n)}function Q(e,n){return z(e,n)}function X(e,n){const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noopener noreferrer",t.className="block p-4 hover:bg-gray-50 transition-colors";const r=document.createElement("div");r.className="flex items-center";const s=document.createElement("div");s.className="flex-shrink-0 mr-3",s.innerHTML=`
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
    </svg>
  `;const o=document.createElement("div");o.className="flex-1 overflow-hidden";const i=document.createElement("p");i.className="text-sm font-medium text-primary truncate",i.textContent=e;const m=document.createElement("p");m.className="text-xs text-gray-500 mt-1",m.textContent="Click to visit website",o.appendChild(i),o.appendChild(m),r.appendChild(s),r.appendChild(o),t.appendChild(r),n.appendChild(t)}function C(e,n,t=null){e.innerHTML="";const r=document.createElement("div");if(r.className="p-4 bg-red-50 text-red-700 text-center",t){const s=document.createElement("a");s.href=t,s.target="_blank",s.rel="noopener noreferrer",s.className="underline hover:text-red-800",s.textContent=n+" - Open original",r.appendChild(s)}else r.textContent=n;e.appendChild(r)}function ee(e){const n=/(?:twitter|x)\.com\/(?:#!\/)?(?:\w+)\/status(?:es)?\/(\d+)/i,t=e.match(n);if(t&&t[1])return t[1];const r=/(?:twitter|x)\.com\/(?:i\/web|intent)\/status\/(\d+)/i,s=e.match(r);return s?s[1]:""}function te(e){const n=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/,t=e.match(n);return t?t[1]:""}function A(e,n=!1,t=!1){const r=document.createElement("span");r.className="tag",r.dataset.tag=e,n&&(r.classList.add("cursor-pointer","hover:bg-blue-200"),r.addEventListener("click",o=>{if(o.target.tagName==="BUTTON")return;const i=document.getElementById("tagFilter");let m=!1;for(let c=0;c<i.options.length;c++)if(i.options[c].value===e){m=!0;break}if(!m){const c=document.createElement("option");c.value=e,c.textContent=e,i.appendChild(c)}i.value=e,i.dispatchEvent(new Event("change"))}));const s=document.createElement("span");if(s.textContent=e,r.appendChild(s),t){const o=document.createElement("button");o.className="ml-1 text-blue-800 hover:text-red-500 focus:outline-none",o.innerHTML="&times;",o.setAttribute("aria-label",`Remove ${e} tag`),o.addEventListener("click",i=>{i.stopPropagation(),i.preventDefault();const m=new CustomEvent("tagDelete",{bubbles:!0,cancelable:!0,detail:{tag:e}});r.dispatchEvent(m)}),r.appendChild(o)}return r}function ne(e,n,t=null){if(n.innerHTML="",!e||e.length===0){const r=document.createElement("span");r.className="text-gray-400 text-sm italic",r.textContent="No tags",n.appendChild(r);return}e.forEach(r=>{const s=A(r,!0,!!t);t&&s.addEventListener("tagDelete",o=>{t(o.detail.tag)}),n.appendChild(s)})}function S(e,n,t){if(n.innerHTML="",!e||e.length===0)return;const r=document.createElement("p");r.className="text-sm text-gray-500 mb-2",r.textContent="Suggested tags:",n.appendChild(r);const s=document.createElement("div");s.className="flex flex-wrap gap-1",e.forEach(o=>{const i=A(o,!1,!1);i.classList.add("cursor-pointer","hover:bg-blue-200"),i.addEventListener("click",()=>{t(o)}),s.appendChild(i)}),n.appendChild(s)}function g(e){const n=new Set;return e.forEach(t=>{t.tags&&Array.isArray(t.tags)&&t.tags.forEach(r=>{n.add(r)})}),Array.from(n).sort()}const f="boardie_posts";function v(){try{const e=localStorage.getItem(f),n=e?JSON.parse(e):[];return h(n),y(g(n)),n}catch(e){return console.error("Error loading posts:",e),e instanceof SyntaxError&&(console.log("Attempting to recover from corrupted storage"),localStorage.removeItem(f)),[]}}function P(e){try{localStorage.setItem(f,JSON.stringify(e))}catch(n){console.error("Error saving posts:",n)}}function oe(e,n=[]){let t=[];try{const o=localStorage.getItem(f);t=o?JSON.parse(o):[]}catch(o){console.error("Error loading existing posts:",o),t=[]}const r=$(e),s={id:M(),url:e,platform:r,tags:n,dateAdded:new Date().toISOString()};t.push(s),P(t),h(t),y(g(t)),document.getElementById("noPostsMessage").classList.add("hidden")}function re(e){let n=[];try{const t=localStorage.getItem(f);n=t?JSON.parse(t):[]}catch(t){console.error("Error loading posts for deletion:",t);return}n=n.filter(t=>t.id!==e),P(n),h(n),y(g(n)),n.length===0&&T()}function h(e){const n=document.getElementById("postsGrid"),t=document.getElementById("postTemplate");n.innerHTML="";const r=[...e].sort((o,i)=>new Date(i.dateAdded)-new Date(o.dateAdded)),s=r.map(o=>{const i=document.importNode(t.content,!0).firstElementChild;i.dataset.id=o.id,i.dataset.platform=o.platform,i.dataset.url=o.url,i.classList.add("opacity-0");const m=i.querySelector(".post-embed"),c=o.platform==="twitter"?"500px":o.platform==="instagram"?"600px":"300px";m.innerHTML=`
      <div class="embed-placeholder bg-gray-100 animate-pulse flex items-center justify-center" 
           style="height: ${c}">
        <p class="text-gray-500">Loading ${o.platform} post...</p>
      </div>
    `;const l=i.querySelector(".post-tags");return ne(o.tags,l,a=>{ae(o.id,a)}),{element:i,post:o}});s.forEach(({element:o})=>{n.appendChild(o)}),s.forEach(({element:o,post:i},m)=>{setTimeout(()=>{const c=o.querySelector(".post-embed");se(i.url,i.platform,c);const l=()=>{const a=c.querySelector(".embed-placeholder");a&&a.remove(),o.classList.remove("opacity-0"),o.classList.add("opacity-100","transition-opacity","duration-500")};setTimeout(()=>{const a=c.querySelectorAll("iframe"),d=c.querySelectorAll("img");a.length===0&&d.length===0?l():(a.forEach(p=>{var u;p.complete||((u=p.contentDocument)==null?void 0:u.readyState)==="complete"?l():p.addEventListener("load",l,{once:!0})}),d.forEach(p=>{p.complete?l():p.addEventListener("load",l,{once:!0})}),setTimeout(l,3e3))},100)},m*100)}),r.length===0?T():document.getElementById("noPostsMessage").classList.add("hidden")}function se(e,n,t){switch(n.toLowerCase()){case"twitter":case"x":Y(e,t);break;case"youtube":G(e,t);break;case"instagram":K(e,t);break;case"pinterest":Z(e,t);break;case"linkedin":Q(e,t);break;default:X(e,t)}}function ie(e){let n=[];try{const t=localStorage.getItem(f);n=t?JSON.parse(t):[]}catch(t){console.error("Error loading posts for filtering:",t),n=[]}if(!e)h(n);else{const t=n.filter(r=>r.tags&&r.tags.includes(e));h(t)}}function ae(e,n){const t=v(),r=t.findIndex(s=>s.id===e);r!==-1&&(t[r].tags=t[r].tags.filter(s=>s!==n),P(t),h(t),y(g(t)))}function T(){document.getElementById("noPostsMessage").classList.remove("hidden")}const I="boardie_posts";function ce(){try{const e=localStorage.getItem(I),n=e?JSON.parse(e):[];if(!n||n.length===0){alert("No posts to export");return}const t={version:"0.1.0",timestamp:new Date().toISOString(),count:n.length,posts:n},r=JSON.stringify(t,null,2),s=new Blob([r],{type:"application/json"}),o=URL.createObjectURL(s),i=document.createElement("a");return i.href=o,i.download=`boardie-export-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o),!0}catch(e){return console.error("Error exporting posts:",e),alert("Failed to export posts: "+e.message),!1}}function le(e){return new Promise((n,t)=>{const r=new FileReader;r.onload=s=>{try{const o=JSON.parse(s.target.result);if(!o.posts||!Array.isArray(o.posts)){t(new Error("Invalid import file format"));return}const i=JSON.parse(localStorage.getItem(I)||"[]"),m=new Set(i.map(a=>a.id)),c=o.posts.filter(a=>!m.has(a.id)),l=[...i,...c];localStorage.setItem(I,JSON.stringify(l)),n({success:!0,totalImported:o.posts.length,newPostsAdded:c.length,duplicatesSkipped:o.posts.length-c.length})}catch(o){console.error("Error importing posts:",o),t(o)}},r.onerror=s=>{t(s)},r.readAsText(e)})}function de(){const e=document.getElementById("addLinkBtn"),n=document.getElementById("addLinkForm"),t=document.getElementById("cancelAddLink"),r=document.getElementById("linkForm"),s=document.getElementById("tagFilter"),o=document.getElementById("menuBtn"),i=document.getElementById("menuDropdown"),m=document.getElementById("exportBtn"),c=document.getElementById("importFile"),l=document.getElementById("emptyStateAddBtn");e.addEventListener("click",()=>{n.classList.toggle("hidden"),document.getElementById("linkUrl").focus();const a=v(),d=g(a),p=document.getElementById("tagSuggestions");S(d,p,u=>{const w=document.getElementById("linkTags"),b=E(w.value);if(!b.includes(u)){const x=b.length>0?", ":"";w.value+=x+u}})}),t.addEventListener("click",()=>{n.classList.add("hidden"),r.reset(),document.getElementById("tagSuggestions").innerHTML=""}),r.addEventListener("submit",a=>{a.preventDefault();const d=document.getElementById("linkUrl").value.trim(),p=document.getElementById("linkTags").value.trim(),u=E(p);d&&(oe(d,u),r.reset(),n.classList.add("hidden"))}),s.addEventListener("change",a=>{const d=a.target.value;ie(d)}),document.getElementById("postsGrid").addEventListener("click",a=>{if(a.target.closest(".delete-post")){const d=a.target.closest(".post-card");d&&d.dataset.id&&confirm("Are you sure you want to delete this post?")&&re(d.dataset.id)}}),o.addEventListener("click",()=>{i.classList.toggle("hidden")}),document.addEventListener("click",a=>{!o.contains(a.target)&&!i.contains(a.target)&&i.classList.add("hidden")}),m.addEventListener("click",()=>{i.classList.add("hidden"),ce()}),c.addEventListener("change",a=>{if(a.target.files.length>0){const d=a.target.files[0];le(d).then(p=>{alert(`Import successful! Added ${p.newPostsAdded} new posts. Skipped ${p.duplicatesSkipped} duplicates.`),window.location.reload()}).catch(p=>{alert("Import failed: "+p.message)}).finally(()=>{a.target.value=""})}}),l&&l.addEventListener("click",()=>{n.classList.remove("hidden"),document.getElementById("linkUrl").focus();const a=v(),d=g(a),p=document.getElementById("tagSuggestions");S(d,p,u=>{const w=document.getElementById("linkTags"),b=E(w.value);if(!b.includes(u)){const x=b.length>0?", ":"";w.value+=x+u}})})}function me(){if(window.twttr){console.log("Twitter widgets already loaded");return}window.twttr=function(e,n,t){var r,s=e.getElementsByTagName(n)[0],o=window.twttr||{};return e.getElementById(t)||(r=e.createElement(n),r.id=t,r.src="https://platform.twitter.com/widgets.js",s.parentNode.insertBefore(r,s),o._e=[],o.ready=function(i){o._e.push(i)}),o}(document,"script","twitter-wjs"),window.twttr.ready(function(){console.log("Twitter widgets loaded and ready")})}document.addEventListener("DOMContentLoaded",()=>{console.log("Boardie application initialized"),me(),de(),v().length===0&&T()});
